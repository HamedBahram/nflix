(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{66:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(28),s=a.n(r),i=a(6),o=(a(65),a(66),a(7)),l=a.n(o),d=a(12),u=a(10),j={LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",LOGOUT_SUCCESS:"LOGOUT_SUCCESS",LOGOUT_FAILED:"LOGOUT_FAILED",UPDATE_SUCCESS:"UPDATE_SUCCESS",UPDATE_FAILED:"UPDATE_FAILED",DELETE_SUCCESS:"DELETE_SUCCESS",DELETE_FAILED:"DELETE_FAILED"},b=n.a.createContext({user:{auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:""},userDispatch:function(){}}),m=a(0),p=function(){var e=Object(c.useContext)(b),t=e.user,a=e.userDispatch;return Object(m.jsx)("header",{children:Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark p-3",children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsx)(i.b,{className:"navbar-brand",to:"/",children:"nflix"}),Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(m.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link active",to:"/","aria-current":"page",children:"Home"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/movies",children:"Movies"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/search",children:"Search"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/facet",children:"Faceted Search"})})]}),t.loggedIn?Object(m.jsxs)("ul",{className:"navbar-nav mb-2 mb-lg-0",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/dashboard",children:t.info.name})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/login",onClick:function(){fetch("/api/v1/users/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(t.auth_token)}}).then((function(e){return e.json()})).then((function(e){e.error?a({type:j.LOGOUT_FAILED,payload:{error:e.error}}):a({type:j.LOGOUT_SUCCESS})})).catch((function(e){return a({type:j.LOGOUT_FAILED,payload:{error:e.message}})}))},children:"Logout"})})]}):Object(m.jsxs)("ul",{className:"navbar-nav mb-2 mb-lg-0",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/login",children:"Login"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/signup",children:"Singup"})})]})]})]})})})},h=a(11),x=function(){return Object(m.jsx)("div",{className:"container mt-4",children:Object(m.jsx)("p",{className:"lead",children:"Home Page"})})},O={FETCH:"fetch",SUCCESS:"success",ERROR:"error",PAGINATE:"paginate"},f=n.a.createContext({movies:{moviesList:[],page:1,count:0,loading:!1,error:""},moviesDispatch:function(){}}),v=a.p+"static/media/poster.c5d88aa1.jpg",g=a(99),N=a(101),y=a(53),S=a.n(y),w=a(54),E=a.n(w),C=Object(g.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),k={position:"fixed",bottom:"10px",right:"0px"},_=function(){var e=C();return Object(m.jsx)("div",{className:e.root,children:Object(m.jsx)(N.a,{"aria-label":"delete",onClick:function(){window.scrollTo(0,0)},style:k,children:Object(m.jsx)(S.a,{style:{fontSize:30,color:E.a[500]}})})})},L=function(){var e=Object(c.useContext)(f),t=e.movies,a=e.moviesDispatch,n=e.scroll,r=e.setScroll,s=Object(h.g)().pathname,o=Object(c.useRef)(null);Object(c.useEffect)((function(){window.scrollTo(0,n)}),[n,s]);var l=function(e){r(window.scrollY)},d=Object(c.useCallback)((function(e){e&&(t.loading||(o.current&&o.current.disconnect(),o.current=new IntersectionObserver((function(e){e[0].isIntersecting&&a({type:O.PAGINATE})})),o.current.observe(e)))}),[t.loading,a]);return Object(m.jsxs)("div",{className:"container my-3",children:[Object(m.jsxs)("p",{className:"text-muted lead",children:["Total Number of movies:"," ",Object(m.jsx)("span",{className:"badge bg-success rounded-pill fw-normal",children:t.count})]}),Object(m.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-4 g-2",children:t.moviesList.length&&t.moviesList.map((function(e,a){return a===t.moviesList.length-1?Object(m.jsx)("div",{ref:d,className:"col",children:Object(m.jsx)(i.b,{to:"/movies/".concat(e._id),className:"text-decoration-none text-dark",children:Object(m.jsxs)("div",{className:"card h-100",children:[Object(m.jsx)("img",{className:"card-img-top",src:e.poster?e.poster:v,alt:"",style:{height:200,objectFit:"cover",objectPosition:"top"}}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h6",{className:"card-title",children:e.title}),Object(m.jsxs)("p",{className:"card-text p-0 m-0 small",children:["Rating: ",e.imdb.rating]}),Object(m.jsxs)("p",{className:"card-text p-0 m-0 small",children:["Year: ",e.year]}),Object(m.jsxs)("p",{className:"card-text small",children:["Cast: ",e.cast?e.cast.join(", "):""]})]})]})})},e._id):Object(m.jsx)("div",{className:"col",children:Object(m.jsx)(i.b,{to:"/movies/".concat(e._id),className:"text-decoration-none text-dark",onClick:l,children:Object(m.jsxs)("div",{className:"card h-100",children:[Object(m.jsx)("img",{className:"card-img-top",src:e.poster?e.poster:v,alt:"",style:{height:200,objectFit:"cover",objectPosition:"top"}}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h6",{className:"card-title",children:e.title}),Object(m.jsxs)("p",{className:"card-text p-0 m-0 small",children:["Rating: ",e.imdb.rating]}),Object(m.jsxs)("p",{className:"card-text p-0 m-0 small",children:["Year: ",e.year]}),Object(m.jsxs)("p",{className:"card-text small",children:["Cast: ",e.cast?e.cast.join(", "):""]})]})]})})},e._id)}))}),Object(m.jsx)(_,{})]})},T=function(){return Object(m.jsx)("div",{children:Object(m.jsx)(L,{})})},I=a(3),A=n.a.createContext({search:{term:"",type:"",moviesList:[],page:1,count:0,loading:!1,error:""},searchDispatch:function(){}}),D=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,c,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.loading){e.next=3;break}return e.abrupt("return");case 3:if(""!==t.term){e.next=5;break}return e.abrupt("return",t);case 5:if("text"!==t.type){e.next=14;break}return e.next=8,fetch("/api/v1/movies/search?text=".concat(t.term,"&page=").concat(t.page));case 8:return a=e.sent,e.next=11,a.json();case 11:return e.abrupt("return",e.sent);case 14:return c=t.term.split(","),n=c.map((function(e){return"".concat(t.type,"[]=").concat(e.trim())})),r=n.join("&"),e.next=19,fetch("/api/v1/movies/search?".concat(r,"&page=").concat(t.page));case 19:return s=e.sent,e.next=22,s.json();case 22:return e.abrupt("return",e.sent);case 23:e.next=29;break;case 25:throw e.prev=25,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),U={INPUT:"input",FETCH:"search",SUCCESS:"success",ERROR:"error",PAGINATE:"paginate"},F=a.p+"static/media/text_search_icon.09e93d0b.png",P=a(102),R=function(){var e=Object(c.useContext)(A),t=e.search,a=e.searchDispatch,n=function(e){a({type:U.INPUT,payload:{name:e.target.name,value:e.target.value}})};return Object(m.jsxs)("div",{className:"container my-4",children:[Object(m.jsxs)("div",{className:"row bg-light border border-grey rounded-3 p-5 mb-4 shadow-lg",children:[Object(m.jsx)("div",{className:"col-3",children:Object(m.jsx)("img",{className:"img-fluid",src:F,alt:"text search icon"})}),Object(m.jsxs)("div",{className:"col-9",children:[Object(m.jsx)("h1",{className:"text-center mb-4",children:"Let's Watch a Movie!"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a({type:U.FETCH}),D(t).then((function(e){a({type:U.SUCCESS,payload:{moviesList:e.moviesList,count:e.count}})})).catch((function(e){return a({type:U.ERROR,payload:{error:e.message}})}))},children:[Object(m.jsxs)("div",{className:"row g-0 mb-2 align-items-center border border-grey rounded-pill px-2 py-0 input-container",children:[Object(m.jsx)("div",{className:"col-11",children:Object(m.jsx)("input",{className:"form-control border-0 bg-transparent",id:"search-textbox",type:"text",name:"term",value:t.term,onChange:n,autoComplete:"off",placeholder:"search movies...","aria-label":"search"})}),Object(m.jsx)("div",{className:"col-1 text-end",children:Object(m.jsx)("span",{className:"material-icons fs-2 align-middle text-success",children:"search"})})]}),Object(m.jsxs)("div",{className:"row g-0",children:[Object(m.jsx)("div",{className:"col me-2",children:Object(m.jsxs)("select",{className:"form-select rounded-pill bg-transparent",name:"type",value:t.type,onChange:n,"aria-label":"Default select example",children:[Object(m.jsx)("option",{children:"Search By"}),Object(m.jsx)("option",{value:"cast",children:"Cast"}),Object(m.jsx)("option",{value:"country",children:"Country"}),Object(m.jsx)("option",{value:"genre",children:"Genre"}),Object(m.jsx)("option",{value:"text",children:"Text Search"})]})}),Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("button",{className:"btn btn-outline-success px-4 py-1 rounded-pill w-100",type:"submit",children:t.loading?Object(m.jsx)("div",{className:"spinner-border spinner-border-sm border-2",role:"status"}):"Search"})})]})]})]})]}),Object(m.jsx)("div",{className:"row flex-column p-5",children:t.error?Object(m.jsx)("div",{className:"alert alert-danger",role:"alert",children:t.error}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"col pb-4",children:Object(m.jsx)(P.a,{page:t.page,count:Math.ceil(t.count/20),onChange:function(e,c){return function(e,c){a({type:U.PAGINATE,payload:{page:c}}),D(Object(I.a)(Object(I.a)({},t),{},{page:c})).then((function(e){a({type:U.SUCCESS,payload:{moviesList:e.moviesList,count:e.count}})})).catch((function(e){return a({type:U.ERROR,payload:{error:e.message}})}))}(0,c)},variant:"outlined",shape:"rounded"})}),Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("ul",{className:"list-group list-group-flush",children:t.moviesList.length?t.moviesList.map((function(e){return Object(m.jsx)(i.b,{to:"/movies/".concat(e._id),className:"list-group-item list-group-item-action",children:e.title},e._id)})):Object(m.jsx)("p",{className:"ps-2 pt-3 text-muted",children:"No results found"})})})]})})]})},G=n.a.createContext({facet:{term:"",type:"",page:1,moviesList:[],rating:[],runtime:[],count:0,loading:!1,error:""},facetDispatch:function(){}}),H=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.loading){e.next=3;break}return e.abrupt("return");case 3:if(""!==t.term){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,fetch("/api/v1/movies/facet?".concat(t.type,"=").concat(t.term,"&page=").concat(t.page));case 7:return a=e.sent,e.next=10,a.json();case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),M={INPUT:"input",FETCH:"fetch",SUCCESS:"success",ERROR:"error",PAGINATE:"paginate",FACET:"facet"},B=a(103),J=a(106),Y=a(107),z=a(104),W=a(105),V=function(){var e=Object(c.useState)("all"),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(c.useContext)(G),s=r.facet,o=r.facetDispatch,l=function(e){o({type:M.INPUT,payload:{name:e.target.name,value:e.target.value}})};return Object(m.jsxs)("div",{className:"container my-4",children:[Object(m.jsxs)("div",{className:"row bg-light border border-grey rounded-3 p-5 mb-4 shadow-lg",children:[Object(m.jsx)("div",{className:"col-3",children:Object(m.jsx)("img",{className:"img-fluid",src:F,alt:"text search icon"})}),Object(m.jsxs)("div",{className:"col-9",children:[Object(m.jsx)("h1",{className:"text-center mb-4",children:"Faceted Search"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o({type:M.FETCH}),H(s).then((function(e){o({type:M.SUCCESS,payload:{moviesList:e.moviesList,rating:e.rating,runtime:e.runtime,count:e.count}})})).catch((function(e){return o({type:M.ERROR,payload:{error:e.message}})}))},children:[Object(m.jsxs)("div",{className:"row g-0 mb-2 align-items-center border border-grey rounded-pill px-2 py-0 input-container",children:[Object(m.jsx)("div",{className:"col-11",children:Object(m.jsx)("input",{className:"form-control border-0 bg-transparent",id:"search-textbox",type:"text",name:"term",value:s.term,onChange:l,autoComplete:"off",placeholder:"search movies...","aria-label":"search"})}),Object(m.jsx)("div",{className:"col-1 text-end",children:Object(m.jsx)("span",{className:"material-icons fs-2 align-middle text-success",children:"search"})})]}),Object(m.jsxs)("div",{className:"row g-0",children:[Object(m.jsx)("div",{className:"col me-2",children:Object(m.jsxs)("select",{className:"form-select rounded-pill bg-transparent",name:"type",value:s.type,onChange:l,"aria-label":"Default select example",children:[Object(m.jsx)("option",{children:"Search By"}),Object(m.jsx)("option",{value:"cast",children:"Cast"}),Object(m.jsx)("option",{value:"country",children:"Country"}),Object(m.jsx)("option",{value:"genre",children:"Genre"})]})}),Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("button",{className:"btn btn-outline-success px-4 py-1 rounded-pill w-100",type:"submit",children:s.loading?Object(m.jsx)("div",{className:"spinner-border spinner-border-sm border-2",role:"status"}):"Search"})})]})]})]})]}),Object(m.jsx)("div",{className:"row flex-column p-5",children:s.error?Object(m.jsx)("div",{className:"alert alert-danger",role:"alert",children:s.error}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"col d-block d-lg-flex justify-content-between align-items-end pb-4",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"px-2 text-muted",children:"Pages"}),Object(m.jsx)(P.a,{className:"pb-4 pb-lg-0",page:s.page,count:Math.ceil(s.count/20),onChange:function(e,t){return function(e,t){o({type:M.PAGINATE,payload:{page:t}}),H(Object(I.a)(Object(I.a)({},s),{},{page:t})).then((function(e){o({type:M.SUCCESS,payload:{moviesList:e.moviesList,rating:e.rating,runtime:e.runtime,count:e.count}})})).catch((function(e){return o({type:M.ERROR,payload:{error:e.message}})}))}(0,t)},variant:"outlined",shape:"rounded"})]}),s.rating.length?Object(m.jsxs)(z.a,{className:"ps-1 ps-lg-0",component:"fieldset",children:[Object(m.jsx)(W.a,{className:"ps-1",component:"legend",children:"Rating"}),Object(m.jsxs)(J.a,{"aria-label":"rating",row:!0,name:"rating",value:a,onChange:function(e){var t=e.target.value;switch(t){case"all":n("all");break;case"other":n("other");break;default:n(Number(t))}},children:[s.rating.map((function(e){return Object(m.jsx)(Y.a,{value:e._id,control:Object(m.jsx)(B.a,{}),label:"other"===e._id?"other (".concat(e.count,")"):"".concat(e._id,"-").concat(e._id+20," (").concat(e.count,")")},e._id)})),Object(m.jsx)(Y.a,{value:"all",control:Object(m.jsx)(B.a,{}),label:"All (".concat(s.count<20?s.count:"20",")")})]})]}):null]}),Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("ul",{className:"list-group list-group-flush",children:s.moviesList.length?s.moviesList.map((function(e){return"all"===a?Object(m.jsx)(i.b,{to:"/movies/".concat(e._id),className:"list-group-item list-group-item-action",children:e.title},e._id):"other"!==a||e.metacritic?e.metacritic>=a&&e.metacritic<a+20?Object(m.jsx)(i.b,{to:"/movies/".concat(e._id),className:"list-group-item list-group-item-action",children:e.title},e._id):null:Object(m.jsx)(i.b,{to:"/movies/".concat(e._id),className:"list-group-item list-group-item-action",children:e.title},e._id)})):Object(m.jsx)("p",{className:"ps-2 pt-3 text-muted",children:"No results found"})})})]})})]})},q=function(e){var t=e.initialValue,a=e.submitHandler,n=e.mode,r=e.switchEditMode,s=e.commentId,i=Object(c.useState)(t),o=Object(u.a)(i,2),l=o[0],d=o[1];return Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l&&(a(l,s),d(""))},children:[Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("textarea",{value:l,onChange:function(e){return d(e.target.value)},className:"form-control",cols:"30",rows:"5",placeholder:"What do you think of this movie?",required:!0})}),"new"===n?Object(m.jsx)("button",{className:"btn w-25 btn-outline-success",type:"submit",children:"Add Review"}):Object(m.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(m.jsx)("button",{className:"btn btn-link link-success m-0 p-0",type:"submit",children:"Submit"}),Object(m.jsx)("button",{className:"btn btn-link link-danger m-0 p-0",type:"button",onClick:function(){return r()},children:"Cancel"})]})]})},K=Object(c.createContext)({notification:null,showNotification:function(e){},hideNotification:function(){}}),Q=function(e){var t=e.children,a=Object(c.useState)(null),n=Object(u.a)(a,2),r=n[0],s=n[1];Object(c.useEffect)((function(){if(r){var e=setTimeout((function(){return s(null)}),3e3);return function(){return clearTimeout(e)}}}),[r]);var i={notification:r,showNotification:function(e){return s(e)},hideNotification:function(){return s(null)}};return Object(m.jsx)(K.Provider,{value:i,children:t})},X=K,Z=function(e){var t=e.match,a=Object(c.useContext)(b).user,n=Object(c.useContext)(X).showNotification,r=Object(c.useState)(!1),s=Object(u.a)(r,2),o=s[0],j=s[1],p=Object(h.f)(),x=t.params.id,O=Object(c.useState)({poster:"",title:"",imdb:{},year:1900,cast:[],fullplot:""}),f=Object(u.a)(O,2),g=f[0],N=f[1];Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/movies/".concat(x));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,N(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[x]);var y=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/movies/".concat(x,"/comments"),{method:"POST",headers:{Authorization:"Bearer ".concat(a.auth_token),"Content-Type":"application/json"},body:JSON.stringify({text:t})});case 3:return c=e.sent,e.next=6,c.json();case 6:if(r=e.sent,s=r.movie,!(i=r.error)){e.next=11;break}throw new Error(i);case 11:N(s),n({message:"Your review was added successfully.",status:"success"}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),n({message:"Failed to add your comment!",status:"error"});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){j((function(e){return!e}))},w=function(){var e=Object(d.a)(l.a.mark((function e(t,c){var r,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/movies/".concat(x,"/comments/").concat(c),{method:"PATCH",headers:{Authorization:"Bearer ".concat(a.auth_token),"Content-Type":"application/json"},body:JSON.stringify({text:t})});case 3:return r=e.sent,e.next=6,r.json();case 6:if(s=e.sent,i=s.movie,!(o=s.error)){e.next=11;break}throw new Error(o);case 11:N(i),S(),n({message:"Your review was updated successfully.",status:"success"}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),S(),n({message:"Failed to update your comment!",status:"error"});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,r,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.target.dataset.commentId,e.prev=1,e.next=4,fetch("/api/v1/movies/".concat(x,"/comments/").concat(c),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a.auth_token),"Content-Type":"application/json"}});case 4:return r=e.sent,e.next=7,r.json();case 7:if(s=e.sent,i=s.movie,!(o=s.error)){e.next=12;break}throw new Error(o);case 12:N(i),n({message:"Your review was deleted successfully.",status:"success"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n({message:"Failed to delete your comment!",status:"error"});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return g.error?Object(m.jsx)("div",{className:"container my-3",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col col-xl-6 mx-auto",children:Object(m.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[Object(m.jsx)("strong",{children:"Holy guacamole!"})," ",g.error,Object(m.jsx)("div",{className:"mt-1",children:Object(m.jsx)(i.b,{to:"/movies",className:"link",children:"Back to Movies"})}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]})})})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"container py-5",children:Object(m.jsx)("div",{className:"",children:Object(m.jsxs)("div",{className:"row g-4",children:[Object(m.jsx)("div",{className:"col-md-4",children:Object(m.jsx)("img",{className:"img-fluid",src:g.poster?g.poster:v,alt:""})}),Object(m.jsx)("div",{className:"col-md-8",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"card-title mb-3",children:g.title}),Object(m.jsxs)("p",{className:"card-text mb-0",children:["Rating: ",g.metacritic]}),Object(m.jsxs)("p",{className:"card-text mb-0",children:["Year: ",g.year]}),Object(m.jsxs)("p",{className:"card-text",children:["Cast: ",g.cast?g.cast.join(", "):""]}),Object(m.jsx)("p",{className:"card-text",children:g.fullplot}),Object(m.jsx)("p",{className:"card-text",children:Object(m.jsx)("small",{className:"text-muted",children:"Last updated 3 mins ago"})}),Object(m.jsx)("button",{className:"btn btn-outline-secondary px-3 py-1 me-3",onClick:function(){return p.goBack()},children:"Go back"}),Object(m.jsx)(i.b,{to:"/movies",className:"card-link",children:"Back to Movies"}),Object(m.jsx)(i.b,{to:"/",className:"card-link",children:"Home"})]})})]})})}),a.loggedIn&&Object(m.jsx)("div",{className:"bg-dark",children:Object(m.jsxs)("div",{className:"container py-5",children:[Object(m.jsx)("p",{className:"h1 text-muted mb-4",children:"Leave a Review"}),Object(m.jsx)(q,{initialValue:"",submitHandler:y,mode:"new"})]})}),Object(m.jsx)("div",{className:"bg-light",children:Object(m.jsxs)("div",{className:"container py-5",children:[Object(m.jsx)("p",{className:"h2 text-muted mb-4",children:"Past Reviews"}),Object(m.jsx)("div",{className:"",children:Object(m.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",children:g.comments?g.comments.map((function(e){return a.info.email===e.email?o?Object(m.jsx)(q,{initialValue:e.text,submitHandler:w,switchEditMode:S,commentId:e._id,mode:"update"}):Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{className:"card h-100",children:Object(m.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(m.jsx)("div",{className:"card-title lead",children:e.name}),Object(m.jsx)("p",{className:"card-subtitle text-muted small mb-2 fw-bold",children:new Date(e.date).toLocaleString()}),Object(m.jsx)("p",{className:"card-text",children:e.text}),Object(m.jsxs)("div",{className:"d-flex justify-content-between mt-auto",children:[Object(m.jsx)("button",{className:"btn btn-link link-success m-0 p-0",onClick:S,children:"Update"}),Object(m.jsx)("button",{className:"btn btn-link link-danger m-0 p-0","data-comment-id":e._id,onClick:E,children:"Delete"})]})]})})},e._id):Object(m.jsx)("div",{className:"col",children:Object(m.jsx)("div",{className:"card h-100",children:Object(m.jsxs)("div",{className:"card-body d-flex flex-column",children:[Object(m.jsx)("div",{className:"card-title lead",children:e.name}),Object(m.jsx)("p",{className:"card-subtitle text-muted small mb-2 fw-bold",children:new Date(e.date).toLocaleString()}),Object(m.jsx)("p",{className:"card-text",children:e.text})]})})},e._id)})):null})})]})})]})},$=function(){var e=Object(c.useContext)(b),t=e.user,a=e.userDispatch,n=Object(c.useState)(""),r=Object(u.a)(n,2),s=r[0],o=r[1],p=Object(c.useState)(""),h=Object(u.a)(p,2),x=h[0],O=h[1],f=Object(c.useState)(""),v=Object(u.a)(f,2),g=v[0],N=v[1],y=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),fetch("/api/v1/users/register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:s,email:x,password:g})}).then((function(e){return e.json()})).then((function(e){e.error?a({type:j.LOGIN_FAILED,payload:{error:e.error}}):a({type:j.LOGIN_SUCCESS,payload:{auth_token:e.auth_token,info:e.info}})})).catch((function(e){console.log({error:e}),a({type:j.LOGIN_FAILED,payload:{error:e.message}})})),o(""),O(""),N("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"container my-4",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 mx-auto",children:Object(m.jsx)("div",{className:"card border-0 bg-dark py-4 px-3 rounded-3",children:Object(m.jsxs)("div",{className:"card-body",children:[t.error?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h5",{className:"card-title text-light text-center mb-4",children:"Sign Up"}),Object(m.jsx)("div",{className:"alert bg-transparent border border-danger text-danger",role:"alert",children:t.error})]}):"",t.loggedIn?Object(m.jsxs)("div",{className:"text-light",children:["Welcome ",t.info.name,", You are logged in!"]}):Object(m.jsxs)(m.Fragment,{children:[t.error?"":Object(m.jsx)("h5",{className:"card-title text-light text-center mb-4",children:"Sign Up"}),Object(m.jsxs)("form",{onSubmit:y,children:[Object(m.jsx)("input",{type:"text",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingName",placeholder:"name",value:s,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("input",{type:"email",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingEmail",placeholder:"name@example.com",value:x,onChange:function(e){return O(e.target.value)}}),Object(m.jsx)("input",{type:"password",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingPassword",placeholder:"Password",value:g,onChange:function(e){return N(e.target.value)}}),Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)("input",{type:"submit",className:"btn btn-outline-success rounded rounded-pill flex-grow-1 me-2",value:"Sign Up"}),Object(m.jsx)(i.b,{to:"/",className:"btn btn-outline-danger rounded rounded-pill flex-grow-1",children:"Cancel"})]})]}),Object(m.jsxs)("div",{className:"d-flex mt-4",children:[Object(m.jsx)("p",{className:"card-text text-muted m-0",children:"Already have an account?"}),Object(m.jsx)(i.b,{to:"/login",className:"m-0 ms-2",children:"Log In"})]})]})]})})})})})},ee=function(){var e=Object(c.useContext)(b),t=e.user,a=e.userDispatch,n=Object(c.useState)(""),r=Object(u.a)(n,2),s=r[0],o=r[1],p=Object(c.useState)(""),h=Object(u.a)(p,2),x=h[0],O=h[1],f=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),fetch("/api/v1/users/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:s,password:x})}).then((function(e){return e.json()})).then((function(e){e.error?a({type:j.LOGIN_FAILED,payload:{error:e.error}}):a({type:j.LOGIN_SUCCESS,payload:{auth_token:e.auth_token,info:e.info}})})).catch((function(e){console.log({error:e}),a({type:j.LOGIN_FAILED,payload:{error:e.message}})})),o(""),O("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"container my-4",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-md-6 mx-auto",children:Object(m.jsx)("div",{className:"card border-0 bg-dark py-4 px-3 rounded-3",children:Object(m.jsxs)("div",{className:"card-body",children:[t.error?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h5",{className:"card-title text-light text-center mb-4",children:"Log In"}),Object(m.jsx)("div",{className:"alert bg-transparent border border-danger text-danger",role:"alert",children:t.error})]}):"",t.loggedIn?Object(m.jsxs)("div",{className:"text-light",children:["Welcome ",t.info.name,", You are logged in!"]}):Object(m.jsxs)(m.Fragment,{children:[t.error?"":Object(m.jsx)("h5",{className:"card-title text-light text-center mb-4",children:"Log In"}),Object(m.jsxs)("form",{onSubmit:f,children:[Object(m.jsx)("input",{type:"email",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingEmail",placeholder:"name@example.com",value:s,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("input",{type:"password",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingPassword",placeholder:"Password",value:x,onChange:function(e){return O(e.target.value)}}),Object(m.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(m.jsx)("input",{type:"submit",className:"btn btn-outline-success rounded rounded-pill flex-grow-1 me-2",value:"Log In"}),Object(m.jsx)(i.b,{to:"/",className:"btn btn-outline-danger rounded rounded-pill flex-grow-1",children:"Cancel"})]})]}),Object(m.jsxs)("div",{className:"d-flex mt-4",children:[Object(m.jsx)("p",{className:"card-text text-muted m-0",children:"New user?"}),Object(m.jsx)(i.b,{to:"/signup",className:"m-0 ms-2",children:"Sign up here"})]})]})]})})})})})},te=function(){var e=Object(c.useContext)(b),t=e.user,a=e.userDispatch,n=Object(c.useContext)(X).showNotification,r=Object(c.useRef)(null),s=Object(c.useRef)(null),i=Object(c.useRef)(null),o=Object(h.f)(),u=function(){var e=Object(d.a)(l.a.mark((function e(c){var i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.preventDefault(),e.next=4,fetch("/api/v1/users/update",{method:"PUT",headers:{Authorization:"Bearer ".concat(t.auth_token),"Content-Type":"application/json"},body:JSON.stringify({preferences:{favorite_cast:r.current.value,preferred_language:s.current.value}})});case 4:return i=e.sent,e.next=7,i.json();case 7:if(o=e.sent,!i.ok){e.next=13;break}a({type:j.UPDATE_SUCCESS,payload:o}),n({message:"Account updated successfully",status:"success"}),e.next=14;break;case 13:throw new Error(o.error);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),a({type:j.UPDATE_FAILED,payload:{error:e.t0.message}}),n({message:e.t0.message,status:"error"});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(l.a.mark((function e(c){var r,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c.preventDefault(),e.next=4,fetch("/api/v1/users/delete",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.auth_token)},body:JSON.stringify({password:i.current.value})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(s=e.sent,!(d=s.error)){e.next=11;break}throw new Error(d);case 11:a({type:j.DELETE_SUCCESS}),n({message:"Account Deleted successfully",status:"success"}),o.replace("/"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),a({type:j.DELETE_FAILED,payload:{error:e.t0.message}}),n({message:e.t0.message,status:"error"});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"container my-4",children:Object(m.jsx)("div",{className:"row",children:t.loggedIn?Object(m.jsxs)("div",{className:"col-md-6 mx-auto",children:[Object(m.jsxs)("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist",children:[Object(m.jsx)("li",{className:"nav-item",role:"presentation",children:Object(m.jsx)("button",{className:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home",type:"button",role:"tab","aria-controls":"home","aria-selected":"true",children:"Account"})}),Object(m.jsx)("li",{className:"nav-item",role:"presentation",children:Object(m.jsx)("button",{className:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#profile",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false",children:"Update"})}),Object(m.jsx)("li",{className:"nav-item",role:"presentation",children:Object(m.jsx)("button",{className:"nav-link",id:"contact-tab","data-bs-toggle":"tab","data-bs-target":"#contact",type:"button",role:"tab","aria-controls":"contact","aria-selected":"false",children:"Delete"})})]}),Object(m.jsxs)("div",{className:"tab-content",id:"myTabContent",children:[Object(m.jsx)("div",{className:"tab-pane fade show active",id:"home",role:"tabpanel","aria-labelledby":"home-tab",children:Object(m.jsx)("div",{className:"p-4",children:Object(m.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(m.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Name:",Object(m.jsx)("span",{children:t.info.name})]}),Object(m.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Email:",Object(m.jsx)("span",{children:t.info.email})]}),Object(m.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Favorite Cast:",Object(m.jsx)("span",{children:t.info.preferences.favorite_cast})]}),Object(m.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:["Preferred Language:",Object(m.jsx)("span",{children:t.info.preferences.preferred_language})]})]})})}),Object(m.jsx)("div",{className:"tab-pane fade",id:"profile",role:"tabpanel","aria-labelledby":"profile-tab",children:Object(m.jsx)("div",{className:"p-4",children:Object(m.jsxs)("form",{onSubmit:u,children:[Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("input",{type:"text",className:"form-control",id:"cast",ref:r,placeholder:"Favorite Cast"})}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("input",{type:"text",className:"form-control",id:"lang",ref:s,placeholder:"Preferred Language"})}),Object(m.jsx)("button",{type:"submit",className:"btn btn-outline-success w-100",children:"Update"})]})})}),Object(m.jsx)("div",{className:"tab-pane fade",id:"contact",role:"tabpanel","aria-labelledby":"contact-tab",children:Object(m.jsx)("div",{className:"p-4",children:Object(m.jsxs)("form",{onSubmit:p,children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("label",{htmlFor:"password",className:"form-label mb-4 fs-5",children:"Type your password \ud83d\udc47"}),Object(m.jsx)("input",{type:"password",className:"form-control",id:"password",ref:i,placeholder:"Password"})]}),Object(m.jsxs)("button",{type:"submit",className:"btn btn-outline-danger w-100",children:[Object(m.jsx)("strong",{children:"Delete"})," My Account \ud83d\ude22"]})]})})})]})]}):Object(m.jsx)("div",{className:"col-md-6 mx-auto",children:Object(m.jsx)("span",{className:"lead text-danger",children:"You need to be logged in!"})})})})},ae=function(){return Object(m.jsx)("div",{className:"container mt-5",children:Object(m.jsx)("p",{className:"h2 fw-normal text-center",children:"Page Not Found \ud83d\ude22"})})},ce=function(){return Object(m.jsx)("main",{children:Object(m.jsxs)(h.c,{children:[Object(m.jsx)(h.a,{exact:!0,path:"/",component:x}),Object(m.jsx)(h.a,{path:"/search",component:R}),Object(m.jsx)(h.a,{path:"/facet",component:V}),Object(m.jsx)(h.a,{exact:!0,path:"/movies",component:T}),Object(m.jsx)(h.a,{path:"/movies/:id",component:Z}),Object(m.jsx)(h.a,{path:"/signup",component:$}),Object(m.jsx)(h.a,{path:"/login",component:ee}),Object(m.jsx)(h.a,{path:"/dashboard",component:te}),Object(m.jsx)(h.a,{component:ae})]})})},ne=function(){return Object(m.jsx)("footer",{className:"bg-dark p-2 mt-auto",children:Object(m.jsx)("p",{className:"p-0 m-0 text-muted text-center",children:"nflix \xa92021"})})},re=a(30),se=function(e,t){switch(t.type){case U.INPUT:return Object(I.a)(Object(I.a)({},e),{},Object(re.a)({},t.payload.name,t.payload.value));case U.FETCH:return Object(I.a)(Object(I.a)({},e),{},{loading:!0,error:"",page:1});case U.PAGINATE:return Object(I.a)(Object(I.a)({},e),{},{page:t.payload.page,loading:!0,error:""});case U.SUCCESS:return Object(I.a)(Object(I.a)({},e),{},{loading:!1,moviesList:t.payload.moviesList,count:t.payload.count,error:""});case U.ERROR:return Object(I.a)(Object(I.a)({},e),{},{loading:!1,error:t.payload.error,moviesList:[],count:0});default:return e}},ie=function(e,t){switch(t.type){case M.INPUT:return Object(I.a)(Object(I.a)({},e),{},Object(re.a)({},t.payload.name,t.payload.value));case M.FETCH:return Object(I.a)(Object(I.a)({},e),{},{loading:!0,error:"",page:1});case M.PAGINATE:return Object(I.a)(Object(I.a)({},e),{},{page:t.payload.page,loading:!0,error:""});case M.SUCCESS:return Object(I.a)(Object(I.a)({},e),{},{loading:!1,error:"",moviesList:t.payload.moviesList,rating:t.payload.rating,runtime:t.payload.runtime,count:t.payload.count});case M.ERROR:return Object(I.a)(Object(I.a)({},e),{},{loading:!1,error:t.payload.error,moviesList:[],rating:[],runtime:[],count:0});default:return e}},oe=function(e,t){switch(t.type){case j.LOGIN_SUCCESS:return{auth_token:t.payload.auth_token,info:Object(I.a)(Object(I.a)({},e.info),t.payload.info),loggedIn:!0,isAdmin:!1,error:""};case j.LOGIN_FAILED:return{auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:t.payload.error};case j.LOGOUT_SUCCESS:return{auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:""};case j.LOGOUT_FAILED:return Object(I.a)(Object(I.a)({},e),{},{error:t.payload.error});case j.UPDATE_SUCCESS:return Object(I.a)(Object(I.a)({},e),t.payload);case j.UPDATE_FAILED:return Object(I.a)(Object(I.a)({},e),{},{error:t.payload.error});case j.DELETE_SUCCESS:return{auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:""};case j.DELETE_FAILED:return Object(I.a)(Object(I.a)({},e),{},{error:t.payload.error});default:return e}},le=function(){var e=Object(c.useContext)(X),t=e.notification,a=e.hideNotification;return t?Object(m.jsx)("div",{className:"position-fixed position-fixed bottom-0 end-0 w-100 px-4 py-3 text-white",children:Object(m.jsxs)("div",{className:"d-flex justify-content-between align-items-start ".concat("success"===t.status?"bg-success":"bg-danger"," p-3 ps-4 rounded-3"),children:[Object(m.jsx)("div",{className:"",children:t.message}),Object(m.jsx)("button",{type:"button",className:"btn-close btn-close-white ms-5","aria-label":"Close",onClick:a})]})}):null},de=function(){var e=Object(d.a)(l.a.mark((function e(){var t,a,c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null!==(t=localStorage.getItem("user"))){e.next=4;break}return e.abrupt("return",void 0);case 4:return a=JSON.parse(t),e.next=7,fetch("/api/v1/users/validate",{method:"POST",headers:{Authorization:"Bearer ".concat(a.auth_token)}});case 7:return c=e.sent,e.next=10,c.json();case 10:if(!(n=e.sent).error){e.next=16;break}return localStorage.setItem("user",JSON.stringify({auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:""})),e.abrupt("return",void 0);case 16:return e.abrupt("return",n);case 17:e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(0),e.abrupt("return",void 0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),ue=a(49),je=function(e,t){switch(t.type){case O.FETCH:return Object(I.a)(Object(I.a)({},e),{},{loading:!0,error:""});case O.PAGINATE:return Object(I.a)(Object(I.a)({},e),{},{page:e.page+1});case O.SUCCESS:return Object(I.a)(Object(I.a)({},e),{},{moviesList:[].concat(Object(ue.a)(e.moviesList),Object(ue.a)(t.payload.moviesList)),count:t.payload.count,loading:!1,error:""});case O.ERROR:return Object(I.a)(Object(I.a)({},e),{},{loading:!1,error:t.payload.error});default:return e}},be={auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:""};var me=function(){var e=Object(c.useReducer)(oe,be),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(c.useMemo)((function(){return{user:a,userDispatch:n}}),[a,n]);Object(c.useEffect)((function(){(function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:(t=e.sent)&&n({type:j.LOGIN_SUCCESS,payload:{auth_token:t.auth_token,info:t.info}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("user",t)}catch(a){console.log(a)}}(a)}),[a]);var s=Object(c.useReducer)(se,{term:"",type:"",moviesList:[],page:1,count:0,loading:!1,error:""}),i=Object(u.a)(s,2),o=i[0],h=i[1],x=Object(c.useMemo)((function(){return{search:o,searchDispatch:h}}),[o,h]),v=Object(c.useReducer)(ie,{term:"",type:"",page:1,moviesList:[],rating:[],runtime:[],count:0,loading:!1,error:""}),g=Object(u.a)(v,2),N=g[0],y=g[1],S=Object(c.useMemo)((function(){return{facet:N,facetDispatch:y}}),[N,y]),w=Object(c.useReducer)(je,{moviesList:[],page:1,count:0,loading:!1,error:""}),E=Object(u.a)(w,2),C=E[0],k=E[1],_=Object(c.useState)(0),L=Object(u.a)(_,2),T=L[0],I=L[1],D=Object(c.useMemo)((function(){return{movies:C,moviesDispatch:k,scroll:T,setScroll:I}}),[C,k,T,I]);return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/movies/search?page=".concat(C.page));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,k({type:O.SUCCESS,payload:{moviesList:a.moviesList,count:a.count}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),k({type:O.ERROR,payload:{error:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}k({type:O.FETCH}),function(){e.apply(this,arguments)}()}),[C.page]),Object(m.jsx)("div",{className:"d-flex flex-column vh-100",children:Object(m.jsx)(Q,{children:Object(m.jsx)(b.Provider,{value:r,children:Object(m.jsx)(f.Provider,{value:D,children:Object(m.jsx)(A.Provider,{value:x,children:Object(m.jsxs)(G.Provider,{value:S,children:[Object(m.jsx)(p,{}),Object(m.jsx)(ce,{}),Object(m.jsx)(le,{}),Object(m.jsx)(ne,{})]})})})})})})};s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(i.a,{children:Object(m.jsx)(me,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.226335ac.chunk.js.map