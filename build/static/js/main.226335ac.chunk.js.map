{"version":3,"sources":["actions/userActions.js","context/userContext.js","components/Header.js","components/Home.js","actions/movieActions.js","context/moviesContext.js","img/poster.jpg","components/ScrollToTop.js","components/GridList.js","components/IndexPage.js","context/searchContext.js","services/fetchData.js","actions/searchActions.js","img/text_search_icon.png","components/Search.js","context/facetContext.js","services/facetFetch.js","actions/facetActions.js","components/Facet.js","components/ReviewForm.js","context/NotificationContext.js","components/ShowPage.js","components/SignupCard.js","components/LoginCard.js","components/Dashboard.js","components/PageNotFound.js","components/Main.js","components/Footer.js","reducers/searchReducer.js","reducers/facetReducer.js","reducers/userReducer.js","components/ui/Notification.js","store/localStorage.js","reducers/moviesReducer.js","components/App.js","index.js"],"names":["USER_ACTIONS","LOGIN_SUCCESS","LOGIN_FAILED","LOGOUT_SUCCESS","LOGOUT_FAILED","UPDATE_SUCCESS","UPDATE_FAILED","DELETE_SUCCESS","DELETE_FAILED","userContext","React","createContext","user","auth_token","info","name","email","preferences","favorite_cast","preferred_language","loggedIn","isAdmin","error","userDispatch","Header","useContext","className","to","type","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","aria-label","id","aria-current","onClick","fetch","method","headers","Authorization","then","res","json","result","payload","catch","e","message","Home","MOVIE_ACTIONS","FETCH","SUCCESS","ERROR","PAGINATE","moviesContext","movies","moviesList","page","count","loading","moviesDispatch","useStyles","makeStyles","theme","root","margin","spacing","styles","position","bottom","right","ScrollToTop","classes","IconButton","window","scrollTo","style","fontSize","color","green","GridList","scroll","setScroll","pathname","useLocation","observer","useRef","useEffect","handleScroll","scrollY","lastMovie","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","observe","length","map","movie","index","ref","_id","src","poster","alt","height","objectFit","objectPosition","title","imdb","rating","year","cast","join","IndexPage","searchContext","search","term","searchDispatch","fetchData","a","response","queryList","split","queryArray","elem","trim","queryString","console","log","Error","SEARCH_ACTIONS","INPUT","Search","handleChange","target","value","text_search_icon","onSubmit","preventDefault","data","onChange","autoComplete","placeholder","role","Pagination","Math","ceil","event","handlePageChange","variant","shape","facetContext","facet","runtime","facetDispatch","facetFetch","state","FACET_ACTIONS","FACET","Facet","useState","setRating","FormControl","component","FormLabel","RadioGroup","row","Number","bucket","FormControlLabel","control","Radio","label","metacritic","ReviewForm","initialValue","submitHandler","mode","switchEditMode","commentId","text","setText","cols","rows","required","NotificationContext","notification","showNotification","hideNotification","NotificationContextProvider","children","setNotification","timer","setTimeout","clearTimeout","context","Provider","ShowPage","match","isEditing","setIsEditing","history","useHistory","params","fullplot","setMovie","getMovie","addComment","body","JSON","stringify","status","prev","updateComment","deleteComment","dataset","data-bs-dismiss","goBack","comments","comment","Date","date","toLocaleString","data-comment-id","SignupCard","setName","setEmail","password","setPassword","handleSubmit","LoginCard","Dashboard","castInputRef","langInputRef","passwordInputRef","handleUpdate","ok","handleDelete","replace","aria-selected","aria-labelledby","htmlFor","PageNotFound","Main","exact","path","Footer","searchReducer","action","facetReducer","userReducer","Notification","loadState","localStorage","getItem","undefined","userObj","parse","setItem","moviesReducer","initialState","App","useReducer","userProviderValue","useMemo","localUser","loadInitialState","serializedUser","saveState","searchProviderValue","facetProviderValue","moviesProviderValue","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.226335ac.chunk.js","sourcesContent":["const USER_ACTIONS = {\r\n    LOGIN_SUCCESS: 'LOGIN_SUCCESS',\r\n    LOGIN_FAILED: 'LOGIN_FAILED',\r\n    LOGOUT_SUCCESS: 'LOGOUT_SUCCESS',\r\n    LOGOUT_FAILED: 'LOGOUT_FAILED',\r\n    UPDATE_SUCCESS: 'UPDATE_SUCCESS',\r\n    UPDATE_FAILED: 'UPDATE_FAILED',\r\n    DELETE_SUCCESS: 'DELETE_SUCCESS',\r\n    DELETE_FAILED: 'DELETE_FAILED',\r\n}\r\n\r\nexport default USER_ACTIONS\r\n","import React from 'react'\r\n\r\nconst userContext = React.createContext({\r\n    user: {\r\n        auth_token: '',\r\n        info: {\r\n            name: '',\r\n            email: '',\r\n            preferences: {\r\n                favorite_cast: '',\r\n                preferred_language: '',\r\n            },\r\n        },\r\n        loggedIn: false,\r\n        isAdmin: false,\r\n        error: '',\r\n    },\r\n    userDispatch: () => {},\r\n})\r\n\r\nexport default userContext\r\n","import React, { useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport USER_ACTIONS from '../actions/userActions'\r\nimport userContext from '../context/userContext'\r\n\r\nconst Header = () => {\r\n    const { user, userDispatch } = useContext(userContext)\r\n    const logout = () => {\r\n        fetch('/api/v1/users/logout', {\r\n            method: 'POST',\r\n            headers: {\r\n                Authorization: `Bearer ${user.auth_token}`,\r\n            },\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                if (result.error) {\r\n                    userDispatch({\r\n                        type: USER_ACTIONS.LOGOUT_FAILED,\r\n                        payload: { error: result.error },\r\n                    })\r\n                } else {\r\n                    userDispatch({ type: USER_ACTIONS.LOGOUT_SUCCESS })\r\n                }\r\n            })\r\n            .catch(e =>\r\n                userDispatch({ type: USER_ACTIONS.LOGOUT_FAILED, payload: { error: e.message } })\r\n            )\r\n    }\r\n    return (\r\n        <header>\r\n            <nav className='navbar navbar-expand-lg navbar-dark bg-dark p-3'>\r\n                <div className='container-fluid'>\r\n                    <Link className='navbar-brand' to='/'>\r\n                        nflix\r\n                    </Link>\r\n                    <button\r\n                        className='navbar-toggler'\r\n                        type='button'\r\n                        data-bs-toggle='collapse'\r\n                        data-bs-target='#navbarSupportedContent'\r\n                        aria-controls='navbarSupportedContent'\r\n                        aria-expanded='false'\r\n                        aria-label='Toggle navigation'\r\n                    >\r\n                        <span className='navbar-toggler-icon'></span>\r\n                    </button>\r\n                    <div className='collapse navbar-collapse' id='navbarSupportedContent'>\r\n                        <ul className='navbar-nav me-auto mb-2 mb-lg-0'>\r\n                            <li className='nav-item'>\r\n                                <Link className='nav-link active' to='/' aria-current='page'>\r\n                                    Home\r\n                                </Link>\r\n                            </li>\r\n                            <li className='nav-item'>\r\n                                <Link className='nav-link' to='/movies'>\r\n                                    Movies\r\n                                </Link>\r\n                            </li>\r\n                            <li className='nav-item'>\r\n                                <Link className='nav-link' to='/search'>\r\n                                    Search\r\n                                </Link>\r\n                            </li>\r\n                            <li className='nav-item'>\r\n                                <Link className='nav-link' to='/facet'>\r\n                                    Faceted Search\r\n                                </Link>\r\n                            </li>\r\n                        </ul>\r\n                        {user.loggedIn ? (\r\n                            <ul className='navbar-nav mb-2 mb-lg-0'>\r\n                                <li className='nav-item'>\r\n                                    <Link className='nav-link' to='/dashboard'>\r\n                                        {user.info.name}\r\n                                    </Link>\r\n                                </li>\r\n                                <li className='nav-item'>\r\n                                    <Link className='nav-link' to='/login' onClick={logout}>\r\n                                        Logout\r\n                                    </Link>\r\n                                </li>\r\n                            </ul>\r\n                        ) : (\r\n                            <ul className='navbar-nav mb-2 mb-lg-0'>\r\n                                <li className='nav-item'>\r\n                                    <Link className='nav-link' to='/login'>\r\n                                        Login\r\n                                    </Link>\r\n                                </li>\r\n                                <li className='nav-item'>\r\n                                    <Link className='nav-link' to='/signup'>\r\n                                        Singup\r\n                                    </Link>\r\n                                </li>\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\n\r\nconst Home = () => (\r\n    <div className='container mt-4'>\r\n        <p className='lead'>Home Page</p>\r\n    </div>\r\n)\r\n\r\nexport default Home\r\n","const MOVIE_ACTIONS = {\r\n    FETCH: 'fetch',\r\n    SUCCESS: 'success',\r\n    ERROR: 'error',\r\n    PAGINATE: 'paginate',\r\n}\r\n\r\nexport default MOVIE_ACTIONS\r\n","import React from 'react'\r\n\r\nconst moviesContext = React.createContext({\r\n    movies: {\r\n        moviesList: [],\r\n        page: 1,\r\n        count: 0,\r\n        loading: false,\r\n        error: '',\r\n    },\r\n    moviesDispatch: () => {},\r\n})\r\n\r\nexport default moviesContext\r\n","export default __webpack_public_path__ + \"static/media/poster.c5d88aa1.jpg\";","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward'\r\nimport green from '@material-ui/core/colors/green'\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        '& > *': {\r\n            margin: theme.spacing(1),\r\n        },\r\n    },\r\n}))\r\n\r\nconst styles = {\r\n    position: 'fixed',\r\n    bottom: '10px',\r\n    right: '0px',\r\n}\r\n\r\nconst ScrollToTop = () => {\r\n    const classes = useStyles()\r\n\r\n    const handleClick = () => {\r\n        window.scrollTo(0, 0)\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <IconButton aria-label='delete' onClick={handleClick} style={styles}>\r\n                <ArrowUpwardIcon style={{ fontSize: 30, color: green[500] }} />\r\n            </IconButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ScrollToTop\r\n","import React, { useContext, useRef, useCallback, useEffect } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport { Link } from 'react-router-dom'\r\nimport MOVIE_ACTIONS from '../actions/movieActions'\r\nimport moviesContext from '../context/moviesContext'\r\nimport poster from '../img/poster.jpg'\r\nimport ScrollToTop from './ScrollToTop'\r\n\r\nconst GridList = () => {\r\n    const { movies, moviesDispatch, scroll, setScroll } = useContext(moviesContext)\r\n    const { pathname } = useLocation()\r\n    const observer = useRef(null)\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, scroll)\r\n    }, [scroll, pathname])\r\n\r\n    const handleScroll = e => {\r\n        setScroll(window.scrollY)\r\n    }\r\n\r\n    const lastMovie = useCallback(\r\n        node => {\r\n            if (!node) return\r\n            if (movies.loading) return\r\n            if (observer.current) observer.current.disconnect()\r\n            observer.current = new IntersectionObserver(entries => {\r\n                if (entries[0].isIntersecting) {\r\n                    moviesDispatch({ type: MOVIE_ACTIONS.PAGINATE })\r\n                }\r\n            })\r\n            observer.current.observe(node)\r\n        },\r\n        [movies.loading, moviesDispatch]\r\n    )\r\n\r\n    return (\r\n        <div className='container my-3'>\r\n            <p className='text-muted lead'>\r\n                Total Number of movies:{' '}\r\n                <span className='badge bg-success rounded-pill fw-normal'>{movies.count}</span>\r\n            </p>\r\n            <div className='row row-cols-1 row-cols-md-2 row-cols-lg-4 g-2'>\r\n                {movies.moviesList.length &&\r\n                    movies.moviesList.map((movie, index) => {\r\n                        if (index === movies.moviesList.length - 1) {\r\n                            return (\r\n                                <div ref={lastMovie} key={movie._id} className='col'>\r\n                                    <Link\r\n                                        to={`/movies/${movie._id}`}\r\n                                        className='text-decoration-none text-dark'\r\n                                    >\r\n                                        <div className='card h-100'>\r\n                                            <img\r\n                                                className='card-img-top'\r\n                                                src={movie.poster ? movie.poster : poster}\r\n                                                alt=''\r\n                                                style={{\r\n                                                    height: 200,\r\n                                                    objectFit: 'cover',\r\n                                                    objectPosition: 'top',\r\n                                                }}\r\n                                            />\r\n                                            <div className='card-body'>\r\n                                                <h6 className='card-title'>{movie.title}</h6>\r\n                                                <p className='card-text p-0 m-0 small'>\r\n                                                    Rating: {movie.imdb.rating}\r\n                                                </p>\r\n                                                <p className='card-text p-0 m-0 small'>\r\n                                                    Year: {movie.year}\r\n                                                </p>\r\n                                                <p className='card-text small'>\r\n                                                    Cast: {movie.cast ? movie.cast.join(', ') : ''}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </Link>\r\n                                </div>\r\n                            )\r\n                        } else {\r\n                            return (\r\n                                <div key={movie._id} className='col'>\r\n                                    <Link\r\n                                        to={`/movies/${movie._id}`}\r\n                                        className='text-decoration-none text-dark'\r\n                                        onClick={handleScroll}\r\n                                    >\r\n                                        <div className='card h-100'>\r\n                                            <img\r\n                                                className='card-img-top'\r\n                                                src={movie.poster ? movie.poster : poster}\r\n                                                alt=''\r\n                                                style={{\r\n                                                    height: 200,\r\n                                                    objectFit: 'cover',\r\n                                                    objectPosition: 'top',\r\n                                                }}\r\n                                            />\r\n                                            <div className='card-body'>\r\n                                                <h6 className='card-title'>{movie.title}</h6>\r\n                                                <p className='card-text p-0 m-0 small'>\r\n                                                    Rating: {movie.imdb.rating}\r\n                                                </p>\r\n                                                <p className='card-text p-0 m-0 small'>\r\n                                                    Year: {movie.year}\r\n                                                </p>\r\n                                                <p className='card-text small'>\r\n                                                    Cast: {movie.cast ? movie.cast.join(', ') : ''}\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </Link>\r\n                                </div>\r\n                            )\r\n                        }\r\n                    })}\r\n            </div>\r\n            <ScrollToTop />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GridList\r\n","import React from 'react'\r\nimport GridList from './GridList'\r\n\r\nconst IndexPage = () => (\r\n    <div>\r\n        <GridList />\r\n    </div>\r\n)\r\n\r\nexport default IndexPage\r\n","import React from 'react'\r\n\r\nconst searchContext = React.createContext({\r\n    search: {\r\n        term: '',\r\n        type: '',\r\n        moviesList: [],\r\n        page: 1,\r\n        count: 0,\r\n        loading: false,\r\n        error: '',\r\n    },\r\n    searchDispatch: () => {},\r\n})\r\n\r\nexport default searchContext\r\n","const fetchData = async search => {\r\n    try {\r\n        if (search.loading) return\r\n        if (search.term === '') return search\r\n        if (search.type === 'text') {\r\n            const response = await fetch(\r\n                `/api/v1/movies/search?text=${search.term}&page=${search.page}`\r\n            )\r\n            return await response.json()\r\n        } else {\r\n            const queryList = search.term.split(',')\r\n            const queryArray = queryList.map(elem => `${search.type}[]=${elem.trim()}`)\r\n            const queryString = queryArray.join('&')\r\n            const response = await fetch(`/api/v1/movies/search?${queryString}&page=${search.page}`)\r\n            return await response.json()\r\n        }\r\n    } catch (error) {\r\n        console.log(error)\r\n        throw new Error(error)\r\n    }\r\n}\r\n\r\nexport default fetchData\r\n","const SEARCH_ACTIONS = {\r\n    INPUT: 'input',\r\n    FETCH: 'search',\r\n    SUCCESS: 'success',\r\n    ERROR: 'error',\r\n    PAGINATE: 'paginate',\r\n}\r\n\r\nexport default SEARCH_ACTIONS\r\n","export default __webpack_public_path__ + \"static/media/text_search_icon.09e93d0b.png\";","import React, { useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport searchContext from '../context/searchContext'\r\nimport fetchData from '../services/fetchData'\r\nimport SEARCH_ACTIONS from '../actions/searchActions'\r\nimport text_search_icon from '../img/text_search_icon.png'\r\nimport Pagination from '@material-ui/lab/Pagination'\r\n\r\nconst Search = () => {\r\n    const { search, searchDispatch } = useContext(searchContext)\r\n\r\n    const handleChange = e => {\r\n        searchDispatch({\r\n            type: SEARCH_ACTIONS.INPUT,\r\n            payload: { name: e.target.name, value: e.target.value },\r\n        })\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        searchDispatch({ type: SEARCH_ACTIONS.FETCH })\r\n        fetchData(search)\r\n            .then(data => {\r\n                searchDispatch({\r\n                    type: SEARCH_ACTIONS.SUCCESS,\r\n                    payload: { moviesList: data.moviesList, count: data.count },\r\n                })\r\n            })\r\n            .catch(error =>\r\n                searchDispatch({ type: SEARCH_ACTIONS.ERROR, payload: { error: error.message } })\r\n            )\r\n    }\r\n\r\n    const handlePageChange = (event, page) => {\r\n        searchDispatch({ type: SEARCH_ACTIONS.PAGINATE, payload: { page } })\r\n        fetchData({ ...search, page })\r\n            .then(data => {\r\n                searchDispatch({\r\n                    type: SEARCH_ACTIONS.SUCCESS,\r\n                    payload: { moviesList: data.moviesList, count: data.count },\r\n                })\r\n            })\r\n            .catch(error =>\r\n                searchDispatch({ type: SEARCH_ACTIONS.ERROR, payload: { error: error.message } })\r\n            )\r\n    }\r\n\r\n    return (\r\n        <div className='container my-4'>\r\n            <div className='row bg-light border border-grey rounded-3 p-5 mb-4 shadow-lg'>\r\n                <div className='col-3'>\r\n                    <img className='img-fluid' src={text_search_icon} alt='text search icon' />\r\n                </div>\r\n                <div className='col-9'>\r\n                    <h1 className='text-center mb-4'>Let's Watch a Movie!</h1>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className='row g-0 mb-2 align-items-center border border-grey rounded-pill px-2 py-0 input-container'>\r\n                            <div className='col-11'>\r\n                                <input\r\n                                    className='form-control border-0 bg-transparent'\r\n                                    id='search-textbox'\r\n                                    type='text'\r\n                                    name='term'\r\n                                    value={search.term}\r\n                                    onChange={handleChange}\r\n                                    autoComplete='off'\r\n                                    placeholder='search movies...'\r\n                                    aria-label='search'\r\n                                />\r\n                            </div>\r\n                            <div className='col-1 text-end'>\r\n                                <span className='material-icons fs-2 align-middle text-success'>\r\n                                    search\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div className='row g-0'>\r\n                            <div className='col me-2'>\r\n                                <select\r\n                                    className='form-select rounded-pill bg-transparent'\r\n                                    name='type'\r\n                                    value={search.type}\r\n                                    onChange={handleChange}\r\n                                    aria-label='Default select example'\r\n                                >\r\n                                    <option>Search By</option>\r\n                                    <option value='cast'>Cast</option>\r\n                                    <option value='country'>Country</option>\r\n                                    <option value='genre'>Genre</option>\r\n                                    <option value='text'>Text Search</option>\r\n                                </select>\r\n                            </div>\r\n                            <div className='col'>\r\n                                <button\r\n                                    className='btn btn-outline-success px-4 py-1 rounded-pill w-100'\r\n                                    type='submit'\r\n                                >\r\n                                    {search.loading ? (\r\n                                        <div\r\n                                            className='spinner-border spinner-border-sm border-2'\r\n                                            role='status'\r\n                                        ></div>\r\n                                    ) : (\r\n                                        'Search'\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div className='row flex-column p-5'>\r\n                {search.error ? (\r\n                    <div className='alert alert-danger' role='alert'>\r\n                        {search.error}\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <div className='col pb-4'>\r\n                            <Pagination\r\n                                page={search.page}\r\n                                count={Math.ceil(search.count / 20)}\r\n                                onChange={(event, page) => handlePageChange(event, page)}\r\n                                variant='outlined'\r\n                                shape='rounded'\r\n                            />\r\n                        </div>\r\n                        <div className='col'>\r\n                            <ul className='list-group list-group-flush'>\r\n                                {search.moviesList.length ? (\r\n                                    search.moviesList.map(movie => (\r\n                                        <Link\r\n                                            key={movie._id}\r\n                                            to={`/movies/${movie._id}`}\r\n                                            className='list-group-item list-group-item-action'\r\n                                        >\r\n                                            {movie.title}\r\n                                        </Link>\r\n                                    ))\r\n                                ) : (\r\n                                    <p className='ps-2 pt-3 text-muted'>No results found</p>\r\n                                )}\r\n                            </ul>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Search\r\n","import React from 'react'\r\n\r\nconst facetContext = React.createContext({\r\n    facet: {\r\n        term: '',\r\n        type: '',\r\n        page: 1,\r\n        moviesList: [],\r\n        rating: [],\r\n        runtime: [],\r\n        count: 0,\r\n        loading: false,\r\n        error: '',\r\n    },\r\n    facetDispatch: () => {},\r\n})\r\n\r\nexport default facetContext\r\n","const facetFetch = async state => {\r\n    try {\r\n        if (state.loading) return\r\n        if (state.term === '') return\r\n        const response = await fetch(\r\n            `/api/v1/movies/facet?${state.type}=${state.term}&page=${state.page}`\r\n        )\r\n        return await response.json()\r\n    } catch (e) {\r\n        console.log(e)\r\n        throw new Error(e)\r\n    }\r\n}\r\n\r\nexport default facetFetch\r\n","const FACET_ACTIONS = {\r\n    INPUT: 'input',\r\n    FETCH: 'fetch',\r\n    SUCCESS: 'success',\r\n    ERROR: 'error',\r\n    PAGINATE: 'paginate',\r\n    FACET: 'facet',\r\n}\r\n\r\nexport default FACET_ACTIONS\r\n","import React, { useState, useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport facetContext from '../context/facetContext'\r\nimport facetFetch from '../services/facetFetch'\r\nimport FACET_ACTIONS from '../actions/facetActions'\r\nimport text_search_icon from '../img/text_search_icon.png'\r\nimport Pagination from '@material-ui/lab/Pagination'\r\nimport Radio from '@material-ui/core/Radio'\r\nimport RadioGroup from '@material-ui/core/RadioGroup'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormLabel from '@material-ui/core/FormLabel'\r\n\r\nconst Facet = () => {\r\n    const [rating, setRating] = useState('all')\r\n    const handleRatingChange = event => {\r\n        const { value } = event.target\r\n        switch (value) {\r\n            case 'all':\r\n                setRating('all')\r\n                break\r\n            case 'other':\r\n                setRating('other')\r\n                break\r\n            default:\r\n                setRating(Number(value))\r\n                break\r\n        }\r\n    }\r\n\r\n    const { facet, facetDispatch } = useContext(facetContext)\r\n\r\n    const handleChange = e => {\r\n        facetDispatch({\r\n            type: FACET_ACTIONS.INPUT,\r\n            payload: { name: e.target.name, value: e.target.value },\r\n        })\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        facetDispatch({ type: FACET_ACTIONS.FETCH })\r\n        facetFetch(facet)\r\n            .then(data => {\r\n                facetDispatch({\r\n                    type: FACET_ACTIONS.SUCCESS,\r\n                    payload: {\r\n                        moviesList: data.moviesList,\r\n                        rating: data.rating,\r\n                        runtime: data.runtime,\r\n                        count: data.count,\r\n                    },\r\n                })\r\n            })\r\n            .catch(error =>\r\n                facetDispatch({ type: FACET_ACTIONS.ERROR, payload: { error: error.message } })\r\n            )\r\n    }\r\n\r\n    const handlePageChange = (event, page) => {\r\n        facetDispatch({ type: FACET_ACTIONS.PAGINATE, payload: { page } })\r\n        facetFetch({ ...facet, page })\r\n            .then(data => {\r\n                facetDispatch({\r\n                    type: FACET_ACTIONS.SUCCESS,\r\n                    payload: {\r\n                        moviesList: data.moviesList,\r\n                        rating: data.rating,\r\n                        runtime: data.runtime,\r\n                        count: data.count,\r\n                    },\r\n                })\r\n            })\r\n            .catch(error =>\r\n                facetDispatch({ type: FACET_ACTIONS.ERROR, payload: { error: error.message } })\r\n            )\r\n    }\r\n\r\n    return (\r\n        <div className='container my-4'>\r\n            <div className='row bg-light border border-grey rounded-3 p-5 mb-4 shadow-lg'>\r\n                <div className='col-3'>\r\n                    <img className='img-fluid' src={text_search_icon} alt='text search icon' />\r\n                </div>\r\n                <div className='col-9'>\r\n                    <h1 className='text-center mb-4'>Faceted Search</h1>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className='row g-0 mb-2 align-items-center border border-grey rounded-pill px-2 py-0 input-container'>\r\n                            <div className='col-11'>\r\n                                <input\r\n                                    className='form-control border-0 bg-transparent'\r\n                                    id='search-textbox'\r\n                                    type='text'\r\n                                    name='term'\r\n                                    value={facet.term}\r\n                                    onChange={handleChange}\r\n                                    autoComplete='off'\r\n                                    placeholder='search movies...'\r\n                                    aria-label='search'\r\n                                />\r\n                            </div>\r\n                            <div className='col-1 text-end'>\r\n                                <span className='material-icons fs-2 align-middle text-success'>\r\n                                    search\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div className='row g-0'>\r\n                            <div className='col me-2'>\r\n                                <select\r\n                                    className='form-select rounded-pill bg-transparent'\r\n                                    name='type'\r\n                                    value={facet.type}\r\n                                    onChange={handleChange}\r\n                                    aria-label='Default select example'\r\n                                >\r\n                                    <option>Search By</option>\r\n                                    <option value='cast'>Cast</option>\r\n                                    <option value='country'>Country</option>\r\n                                    <option value='genre'>Genre</option>\r\n                                </select>\r\n                            </div>\r\n                            <div className='col'>\r\n                                <button\r\n                                    className='btn btn-outline-success px-4 py-1 rounded-pill w-100'\r\n                                    type='submit'\r\n                                >\r\n                                    {facet.loading ? (\r\n                                        <div\r\n                                            className='spinner-border spinner-border-sm border-2'\r\n                                            role='status'\r\n                                        ></div>\r\n                                    ) : (\r\n                                        'Search'\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            <div className='row flex-column p-5'>\r\n                {facet.error ? (\r\n                    <div className='alert alert-danger' role='alert'>\r\n                        {facet.error}\r\n                    </div>\r\n                ) : (\r\n                    <>\r\n                        <div className='col d-block d-lg-flex justify-content-between align-items-end pb-4'>\r\n                            <div>\r\n                                <p className='px-2 text-muted'>Pages</p>\r\n                                <Pagination\r\n                                    className='pb-4 pb-lg-0'\r\n                                    page={facet.page}\r\n                                    count={Math.ceil(facet.count / 20)}\r\n                                    onChange={(event, page) => handlePageChange(event, page)}\r\n                                    variant='outlined'\r\n                                    shape='rounded'\r\n                                />\r\n                            </div>\r\n                            {facet.rating.length ? (\r\n                                <FormControl className='ps-1 ps-lg-0' component='fieldset'>\r\n                                    <FormLabel className='ps-1' component='legend'>\r\n                                        Rating\r\n                                    </FormLabel>\r\n                                    <RadioGroup\r\n                                        aria-label='rating'\r\n                                        row\r\n                                        name='rating'\r\n                                        value={rating}\r\n                                        onChange={handleRatingChange}\r\n                                    >\r\n                                        {facet.rating.map(bucket => (\r\n                                            <FormControlLabel\r\n                                                key={bucket._id}\r\n                                                value={bucket._id}\r\n                                                control={<Radio />}\r\n                                                label={\r\n                                                    bucket._id === 'other'\r\n                                                        ? `other (${bucket.count})`\r\n                                                        : `${bucket._id}-${bucket._id + 20} (${\r\n                                                              bucket.count\r\n                                                          })`\r\n                                                }\r\n                                            />\r\n                                        ))}\r\n                                        <FormControlLabel\r\n                                            value='all'\r\n                                            control={<Radio />}\r\n                                            label={`All (${facet.count < 20 ? facet.count : '20'})`}\r\n                                        />\r\n                                    </RadioGroup>\r\n                                </FormControl>\r\n                            ) : null}\r\n                        </div>\r\n                        <div className='col'>\r\n                            <ul className='list-group list-group-flush'>\r\n                                {facet.moviesList.length ? (\r\n                                    facet.moviesList.map(movie => {\r\n                                        if (rating === 'all') {\r\n                                            return (\r\n                                                <Link\r\n                                                    key={movie._id}\r\n                                                    to={`/movies/${movie._id}`}\r\n                                                    className='list-group-item list-group-item-action'\r\n                                                >\r\n                                                    {movie.title}\r\n                                                </Link>\r\n                                            )\r\n                                        }\r\n\r\n                                        if (rating === 'other' && !movie.metacritic) {\r\n                                            return (\r\n                                                <Link\r\n                                                    key={movie._id}\r\n                                                    to={`/movies/${movie._id}`}\r\n                                                    className='list-group-item list-group-item-action'\r\n                                                >\r\n                                                    {movie.title}\r\n                                                </Link>\r\n                                            )\r\n                                        }\r\n\r\n                                        if (\r\n                                            movie.metacritic >= rating &&\r\n                                            movie.metacritic < rating + 20\r\n                                        ) {\r\n                                            return (\r\n                                                <Link\r\n                                                    key={movie._id}\r\n                                                    to={`/movies/${movie._id}`}\r\n                                                    className='list-group-item list-group-item-action'\r\n                                                >\r\n                                                    {movie.title}\r\n                                                </Link>\r\n                                            )\r\n                                        } else {\r\n                                            return null\r\n                                        }\r\n                                    })\r\n                                ) : (\r\n                                    <p className='ps-2 pt-3 text-muted'>No results found</p>\r\n                                )}\r\n                            </ul>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Facet\r\n","import { useState } from 'react'\r\n\r\nconst ReviewForm = ({ initialValue, submitHandler, mode, switchEditMode, commentId }) => {\r\n    const [text, setText] = useState(initialValue)\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        if (!text) return\r\n        submitHandler(text, commentId)\r\n        setText('')\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div className='mb-3'>\r\n                <textarea\r\n                    value={text}\r\n                    onChange={e => setText(e.target.value)}\r\n                    className='form-control'\r\n                    cols='30'\r\n                    rows='5'\r\n                    placeholder='What do you think of this movie?'\r\n                    required\r\n                ></textarea>\r\n            </div>\r\n            {mode === 'new' ? (\r\n                <button className='btn w-25 btn-outline-success' type='submit'>\r\n                    Add Review\r\n                </button>\r\n            ) : (\r\n                <div className='d-flex justify-content-between'>\r\n                    <button className='btn btn-link link-success m-0 p-0' type='submit'>\r\n                        Submit\r\n                    </button>\r\n                    <button\r\n                        className='btn btn-link link-danger m-0 p-0'\r\n                        type='button'\r\n                        onClick={() => switchEditMode()}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ReviewForm\r\n","import { useState, useEffect, createContext } from 'react'\r\n\r\nconst NotificationContext = createContext({\r\n    notification: null, // message: '', status: ''\r\n    showNotification: notification => {},\r\n    hideNotification: () => {},\r\n})\r\n\r\nexport const NotificationContextProvider = ({ children }) => {\r\n    const [notification, setNotification] = useState(null)\r\n    useEffect(() => {\r\n        if (notification) {\r\n            const timer = setTimeout(() => setNotification(null), 3000)\r\n            return () => clearTimeout(timer)\r\n        }\r\n    }, [notification])\r\n    const showNotification = notification => setNotification(notification)\r\n    const hideNotification = () => setNotification(null)\r\n\r\n    const context = {\r\n        notification,\r\n        showNotification,\r\n        hideNotification,\r\n    }\r\n\r\n    return <NotificationContext.Provider value={context}>{children}</NotificationContext.Provider>\r\n}\r\n\r\nexport default NotificationContext\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport ReviewForm from './ReviewForm'\r\nimport poster from '../img/poster.jpg'\r\nimport userContext from '../context/userContext'\r\nimport NotificationContext from '../context/NotificationContext'\r\n\r\nconst ShowPage = ({ match }) => {\r\n    const { user } = useContext(userContext)\r\n    const { showNotification } = useContext(NotificationContext)\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const history = useHistory()\r\n    const { id } = match.params\r\n    const [movie, setMovie] = useState({\r\n        poster: '',\r\n        title: '',\r\n        imdb: {},\r\n        year: 1900,\r\n        cast: [],\r\n        fullplot: '',\r\n    })\r\n    useEffect(() => {\r\n        async function getMovie() {\r\n            const response = await fetch(`/api/v1/movies/${id}`)\r\n            const result = await response.json()\r\n            setMovie(result)\r\n        }\r\n        getMovie()\r\n    }, [id])\r\n\r\n    const addComment = async text => {\r\n        try {\r\n            const response = await fetch(`/api/v1/movies/${id}/comments`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    Authorization: `Bearer ${user.auth_token}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ text }),\r\n            })\r\n            const { movie, error } = await response.json()\r\n            if (error) throw new Error(error)\r\n            setMovie(movie)\r\n            showNotification({ message: 'Your review was added successfully.', status: 'success' })\r\n        } catch (error) {\r\n            showNotification({ message: 'Failed to add your comment!', status: 'error' })\r\n        }\r\n    }\r\n\r\n    const switchEditMode = () => {\r\n        setIsEditing(prev => !prev)\r\n    }\r\n\r\n    const updateComment = async (text, commentId) => {\r\n        try {\r\n            const response = await fetch(`/api/v1/movies/${id}/comments/${commentId}`, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    Authorization: `Bearer ${user.auth_token}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ text }),\r\n            })\r\n            const { movie, error } = await response.json()\r\n            if (error) throw new Error(error)\r\n            setMovie(movie)\r\n            switchEditMode()\r\n            showNotification({\r\n                message: 'Your review was updated successfully.',\r\n                status: 'success',\r\n            })\r\n        } catch (error) {\r\n            switchEditMode()\r\n            showNotification({ message: 'Failed to update your comment!', status: 'error' })\r\n        }\r\n    }\r\n\r\n    const deleteComment = async e => {\r\n        const { commentId } = e.target.dataset\r\n        try {\r\n            const response = await fetch(`/api/v1/movies/${id}/comments/${commentId}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    Authorization: `Bearer ${user.auth_token}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            })\r\n            const { movie, error } = await response.json()\r\n            if (error) throw new Error(error)\r\n            setMovie(movie)\r\n            showNotification({\r\n                message: 'Your review was deleted successfully.',\r\n                status: 'success',\r\n            })\r\n        } catch (error) {\r\n            showNotification({ message: 'Failed to delete your comment!', status: 'error' })\r\n        }\r\n    }\r\n\r\n    return movie.error ? (\r\n        <div className='container my-3'>\r\n            <div className='row'>\r\n                <div className='col col-xl-6 mx-auto'>\r\n                    <div className='alert alert-warning alert-dismissible fade show' role='alert'>\r\n                        <strong>Holy guacamole!</strong> {movie.error}\r\n                        <div className='mt-1'>\r\n                            <Link to='/movies' className='link'>\r\n                                Back to Movies\r\n                            </Link>\r\n                        </div>\r\n                        <button\r\n                            type='button'\r\n                            className='btn-close'\r\n                            data-bs-dismiss='alert'\r\n                            aria-label='Close'\r\n                        ></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    ) : (\r\n        <>\r\n            <div className='container py-5'>\r\n                <div className=''>\r\n                    <div className='row g-4'>\r\n                        <div className='col-md-4'>\r\n                            <img\r\n                                className='img-fluid'\r\n                                src={movie.poster ? movie.poster : poster}\r\n                                alt=''\r\n                            />\r\n                        </div>\r\n                        <div className='col-md-8'>\r\n                            <div className='card-body'>\r\n                                <h5 className='card-title mb-3'>{movie.title}</h5>\r\n                                <p className='card-text mb-0'>Rating: {movie.metacritic}</p>\r\n                                <p className='card-text mb-0'>Year: {movie.year}</p>\r\n                                <p className='card-text'>\r\n                                    Cast: {movie.cast ? movie.cast.join(', ') : ''}\r\n                                </p>\r\n                                <p className='card-text'>{movie.fullplot}</p>\r\n                                <p className='card-text'>\r\n                                    <small className='text-muted'>Last updated 3 mins ago</small>\r\n                                </p>\r\n                                <button\r\n                                    className='btn btn-outline-secondary px-3 py-1 me-3'\r\n                                    onClick={() => history.goBack()}\r\n                                >\r\n                                    Go back\r\n                                </button>\r\n                                <Link to='/movies' className='card-link'>\r\n                                    Back to Movies\r\n                                </Link>\r\n                                <Link to='/' className='card-link'>\r\n                                    Home\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {user.loggedIn && (\r\n                <div className='bg-dark'>\r\n                    <div className='container py-5'>\r\n                        <p className='h1 text-muted mb-4'>Leave a Review</p>\r\n                        <ReviewForm initialValue='' submitHandler={addComment} mode='new' />\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <div className='bg-light'>\r\n                <div className='container py-5'>\r\n                    <p className='h2 text-muted mb-4'>Past Reviews</p>\r\n                    <div className=''>\r\n                        <div className='row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4'>\r\n                            {movie.comments\r\n                                ? movie.comments.map(comment => {\r\n                                      if (user.info.email === comment.email) {\r\n                                          if (isEditing) {\r\n                                              return (\r\n                                                  <ReviewForm\r\n                                                      initialValue={comment.text}\r\n                                                      submitHandler={updateComment}\r\n                                                      switchEditMode={switchEditMode}\r\n                                                      commentId={comment._id}\r\n                                                      mode='update'\r\n                                                  />\r\n                                              )\r\n                                          } else {\r\n                                              return (\r\n                                                  <div className='col' key={comment._id}>\r\n                                                      <div className='card h-100'>\r\n                                                          <div className='card-body d-flex flex-column'>\r\n                                                              <div className='card-title lead'>\r\n                                                                  {comment.name}\r\n                                                              </div>\r\n                                                              <p className='card-subtitle text-muted small mb-2 fw-bold'>\r\n                                                                  {new Date(\r\n                                                                      comment.date\r\n                                                                  ).toLocaleString()}\r\n                                                              </p>\r\n                                                              <p className='card-text'>\r\n                                                                  {comment.text}\r\n                                                              </p>\r\n                                                              <div className='d-flex justify-content-between mt-auto'>\r\n                                                                  <button\r\n                                                                      className='btn btn-link link-success m-0 p-0'\r\n                                                                      onClick={switchEditMode}\r\n                                                                  >\r\n                                                                      Update\r\n                                                                  </button>\r\n                                                                  <button\r\n                                                                      className='btn btn-link link-danger m-0 p-0'\r\n                                                                      data-comment-id={comment._id}\r\n                                                                      onClick={deleteComment}\r\n                                                                  >\r\n                                                                      Delete\r\n                                                                  </button>\r\n                                                              </div>\r\n                                                          </div>\r\n                                                      </div>\r\n                                                  </div>\r\n                                              )\r\n                                          }\r\n                                      }\r\n                                      return (\r\n                                          <div className='col' key={comment._id}>\r\n                                              <div className='card h-100'>\r\n                                                  <div className='card-body d-flex flex-column'>\r\n                                                      <div className='card-title lead'>\r\n                                                          {comment.name}\r\n                                                      </div>\r\n                                                      <p className='card-subtitle text-muted small mb-2 fw-bold'>\r\n                                                          {new Date(comment.date).toLocaleString()}\r\n                                                      </p>\r\n                                                      <p className='card-text'>{comment.text}</p>\r\n                                                  </div>\r\n                                              </div>\r\n                                          </div>\r\n                                      )\r\n                                  })\r\n                                : null}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ShowPage\r\n","import React, { useState, useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport userContext from '../context/userContext'\r\nimport USER_ACTIONS from '../actions/userActions'\r\n\r\nconst SignupCard = () => {\r\n    const { user, userDispatch } = useContext(userContext)\r\n    const [name, setName] = useState('')\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const handleSubmit = async event => {\r\n        event.preventDefault()\r\n        fetch('/api/v1/users/register', {\r\n            method: 'POST',\r\n            headers: {\r\n                'content-type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ name, email, password }),\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                if (result.error) {\r\n                    userDispatch({\r\n                        type: USER_ACTIONS.LOGIN_FAILED,\r\n                        payload: { error: result.error },\r\n                    })\r\n                } else {\r\n                    userDispatch({\r\n                        type: USER_ACTIONS.LOGIN_SUCCESS,\r\n                        payload: { auth_token: result.auth_token, info: result.info },\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log({ error })\r\n                userDispatch({ type: USER_ACTIONS.LOGIN_FAILED, payload: { error: error.message } })\r\n            })\r\n        setName('')\r\n        setEmail('')\r\n        setPassword('')\r\n    }\r\n    return (\r\n        <div className='container my-4'>\r\n            <div className='row'>\r\n                <div className='col-md-6 mx-auto'>\r\n                    <div className='card border-0 bg-dark py-4 px-3 rounded-3'>\r\n                        <div className='card-body'>\r\n                            {user.error ? (\r\n                                <>\r\n                                    <h5 className='card-title text-light text-center mb-4'>\r\n                                        Sign Up\r\n                                    </h5>\r\n                                    <div\r\n                                        className='alert bg-transparent border border-danger text-danger'\r\n                                        role='alert'\r\n                                    >\r\n                                        {user.error}\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                ''\r\n                            )}\r\n                            {user.loggedIn ? (\r\n                                <div className='text-light'>\r\n                                    Welcome {user.info.name}, You are logged in!\r\n                                </div>\r\n                            ) : (\r\n                                <>\r\n                                    {user.error ? (\r\n                                        ''\r\n                                    ) : (\r\n                                        <h5 className='card-title text-light text-center mb-4'>\r\n                                            Sign Up\r\n                                        </h5>\r\n                                    )}\r\n                                    <form onSubmit={handleSubmit}>\r\n                                        <input\r\n                                            type='text'\r\n                                            className='form-control rounded rounded-pill mb-3 ps-3'\r\n                                            id='floatingName'\r\n                                            placeholder='name'\r\n                                            value={name}\r\n                                            onChange={e => setName(e.target.value)}\r\n                                        />\r\n                                        <input\r\n                                            type='email'\r\n                                            className='form-control rounded rounded-pill mb-3 ps-3'\r\n                                            id='floatingEmail'\r\n                                            placeholder='name@example.com'\r\n                                            value={email}\r\n                                            onChange={e => setEmail(e.target.value)}\r\n                                        />\r\n                                        <input\r\n                                            type='password'\r\n                                            className='form-control rounded rounded-pill mb-3 ps-3'\r\n                                            id='floatingPassword'\r\n                                            placeholder='Password'\r\n                                            value={password}\r\n                                            onChange={e => setPassword(e.target.value)}\r\n                                        />\r\n                                        <div className='d-flex justify-content-center align-items-center'>\r\n                                            <input\r\n                                                type='submit'\r\n                                                className='btn btn-outline-success rounded rounded-pill flex-grow-1 me-2'\r\n                                                value='Sign Up'\r\n                                            />\r\n                                            <Link\r\n                                                to='/'\r\n                                                className='btn btn-outline-danger rounded rounded-pill flex-grow-1'\r\n                                            >\r\n                                                Cancel\r\n                                            </Link>\r\n                                        </div>\r\n                                    </form>\r\n                                    <div className='d-flex mt-4'>\r\n                                        <p className='card-text text-muted m-0'>\r\n                                            Already have an account?\r\n                                        </p>\r\n                                        <Link to='/login' className='m-0 ms-2'>\r\n                                            Log In\r\n                                        </Link>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SignupCard\r\n","import React, { useState, useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport userContext from '../context/userContext'\r\nimport USER_ACTIONS from '../actions/userActions'\r\n\r\nconst LoginCard = () => {\r\n    const { user, userDispatch } = useContext(userContext)\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const handleSubmit = async event => {\r\n        event.preventDefault()\r\n        fetch('/api/v1/users/login', {\r\n            method: 'POST',\r\n            headers: {\r\n                'content-type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ email, password }),\r\n        })\r\n            .then(res => res.json())\r\n            .then(result => {\r\n                if (result.error) {\r\n                    userDispatch({\r\n                        type: USER_ACTIONS.LOGIN_FAILED,\r\n                        payload: { error: result.error },\r\n                    })\r\n                } else {\r\n                    userDispatch({\r\n                        type: USER_ACTIONS.LOGIN_SUCCESS,\r\n                        payload: { auth_token: result.auth_token, info: result.info },\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log({ error })\r\n                userDispatch({ type: USER_ACTIONS.LOGIN_FAILED, payload: { error: error.message } })\r\n            })\r\n\r\n        setEmail('')\r\n        setPassword('')\r\n    }\r\n    return (\r\n        <div className='container my-4'>\r\n            <div className='row'>\r\n                <div className='col-md-6 mx-auto'>\r\n                    <div className='card border-0 bg-dark py-4 px-3 rounded-3'>\r\n                        <div className='card-body'>\r\n                            {user.error ? (\r\n                                <>\r\n                                    <h5 className='card-title text-light text-center mb-4'>\r\n                                        Log In\r\n                                    </h5>\r\n                                    <div\r\n                                        className='alert bg-transparent border border-danger text-danger'\r\n                                        role='alert'\r\n                                    >\r\n                                        {user.error}\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                ''\r\n                            )}\r\n                            {user.loggedIn ? (\r\n                                <div className='text-light'>\r\n                                    Welcome {user.info.name}, You are logged in!\r\n                                </div>\r\n                            ) : (\r\n                                <>\r\n                                    {user.error ? (\r\n                                        ''\r\n                                    ) : (\r\n                                        <h5 className='card-title text-light text-center mb-4'>\r\n                                            Log In\r\n                                        </h5>\r\n                                    )}\r\n                                    <form onSubmit={handleSubmit}>\r\n                                        <input\r\n                                            type='email'\r\n                                            className='form-control rounded rounded-pill mb-3 ps-3'\r\n                                            id='floatingEmail'\r\n                                            placeholder='name@example.com'\r\n                                            value={email}\r\n                                            onChange={e => setEmail(e.target.value)}\r\n                                        />\r\n                                        <input\r\n                                            type='password'\r\n                                            className='form-control rounded rounded-pill mb-3 ps-3'\r\n                                            id='floatingPassword'\r\n                                            placeholder='Password'\r\n                                            value={password}\r\n                                            onChange={e => setPassword(e.target.value)}\r\n                                        />\r\n                                        <div className='d-flex justify-content-center align-items-center'>\r\n                                            <input\r\n                                                type='submit'\r\n                                                className='btn btn-outline-success rounded rounded-pill flex-grow-1 me-2'\r\n                                                value='Log In'\r\n                                            />\r\n                                            <Link\r\n                                                to='/'\r\n                                                className='btn btn-outline-danger rounded rounded-pill flex-grow-1'\r\n                                            >\r\n                                                Cancel\r\n                                            </Link>\r\n                                        </div>\r\n                                    </form>\r\n                                    <div className='d-flex mt-4'>\r\n                                        <p className='card-text text-muted m-0'>New user?</p>\r\n                                        <Link to='/signup' className='m-0 ms-2'>\r\n                                            Sign up here\r\n                                        </Link>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginCard\r\n","import React, { useRef, useContext } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport USER_ACTIONS from '../actions/userActions'\r\nimport NotificationContext from '../context/NotificationContext'\r\nimport userContext from '../context/userContext'\r\n\r\nconst Dashboard = () => {\r\n    const { user, userDispatch } = useContext(userContext)\r\n    const { showNotification } = useContext(NotificationContext)\r\n    const castInputRef = useRef(null)\r\n    const langInputRef = useRef(null)\r\n    const passwordInputRef = useRef(null)\r\n    const history = useHistory()\r\n\r\n    const handleUpdate = async e => {\r\n        try {\r\n            e.preventDefault()\r\n            const response = await fetch('/api/v1/users/update', {\r\n                method: 'PUT',\r\n                headers: {\r\n                    Authorization: `Bearer ${user.auth_token}`,\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    preferences: {\r\n                        favorite_cast: castInputRef.current.value,\r\n                        preferred_language: langInputRef.current.value,\r\n                    },\r\n                }),\r\n            })\r\n            const payload = await response.json()\r\n            if (response.ok) {\r\n                userDispatch({ type: USER_ACTIONS.UPDATE_SUCCESS, payload })\r\n                showNotification({ message: 'Account updated successfully', status: 'success' })\r\n            } else {\r\n                throw new Error(payload.error)\r\n            }\r\n        } catch (error) {\r\n            userDispatch({ type: USER_ACTIONS.UPDATE_FAILED, payload: { error: error.message } })\r\n            showNotification({ message: error.message, status: 'error' })\r\n        }\r\n    }\r\n\r\n    const handleDelete = async e => {\r\n        try {\r\n            e.preventDefault()\r\n\r\n            const response = await fetch('/api/v1/users/delete', {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    Authorization: `Bearer ${user.auth_token}`,\r\n                },\r\n                body: JSON.stringify({ password: passwordInputRef.current.value }),\r\n            })\r\n\r\n            const { error } = await response.json()\r\n            if (error) throw new Error(error)\r\n\r\n            userDispatch({ type: USER_ACTIONS.DELETE_SUCCESS })\r\n            showNotification({ message: 'Account Deleted successfully', status: 'success' })\r\n            history.replace('/')\r\n        } catch (error) {\r\n            userDispatch({ type: USER_ACTIONS.DELETE_FAILED, payload: { error: error.message } })\r\n            showNotification({ message: error.message, status: 'error' })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='container my-4'>\r\n            <div className='row'>\r\n                {!user.loggedIn ? (\r\n                    <div className='col-md-6 mx-auto'>\r\n                        <span className='lead text-danger'>You need to be logged in!</span>\r\n                    </div>\r\n                ) : (\r\n                    <div className='col-md-6 mx-auto'>\r\n                        <ul className='nav nav-tabs' id='myTab' role='tablist'>\r\n                            <li className='nav-item' role='presentation'>\r\n                                <button\r\n                                    className='nav-link active'\r\n                                    id='home-tab'\r\n                                    data-bs-toggle='tab'\r\n                                    data-bs-target='#home'\r\n                                    type='button'\r\n                                    role='tab'\r\n                                    aria-controls='home'\r\n                                    aria-selected='true'\r\n                                >\r\n                                    Account\r\n                                </button>\r\n                            </li>\r\n                            <li className='nav-item' role='presentation'>\r\n                                <button\r\n                                    className='nav-link'\r\n                                    id='profile-tab'\r\n                                    data-bs-toggle='tab'\r\n                                    data-bs-target='#profile'\r\n                                    type='button'\r\n                                    role='tab'\r\n                                    aria-controls='profile'\r\n                                    aria-selected='false'\r\n                                >\r\n                                    Update\r\n                                </button>\r\n                            </li>\r\n                            <li className='nav-item' role='presentation'>\r\n                                <button\r\n                                    className='nav-link'\r\n                                    id='contact-tab'\r\n                                    data-bs-toggle='tab'\r\n                                    data-bs-target='#contact'\r\n                                    type='button'\r\n                                    role='tab'\r\n                                    aria-controls='contact'\r\n                                    aria-selected='false'\r\n                                >\r\n                                    Delete\r\n                                </button>\r\n                            </li>\r\n                        </ul>\r\n                        <div className='tab-content' id='myTabContent'>\r\n                            <div\r\n                                className='tab-pane fade show active'\r\n                                id='home'\r\n                                role='tabpanel'\r\n                                aria-labelledby='home-tab'\r\n                            >\r\n                                <div className='p-4'>\r\n                                    <ul className='list-group list-group-flush'>\r\n                                        <li className='list-group-item d-flex justify-content-between align-items-center'>\r\n                                            Name:\r\n                                            <span>{user.info.name}</span>\r\n                                        </li>\r\n                                        <li className='list-group-item d-flex justify-content-between align-items-center'>\r\n                                            Email:\r\n                                            <span>{user.info.email}</span>\r\n                                        </li>\r\n                                        <li className='list-group-item d-flex justify-content-between align-items-center'>\r\n                                            Favorite Cast:\r\n                                            <span>{user.info.preferences.favorite_cast}</span>\r\n                                        </li>\r\n                                        <li className='list-group-item d-flex justify-content-between align-items-center'>\r\n                                            Preferred Language:\r\n                                            <span>{user.info.preferences.preferred_language}</span>\r\n                                        </li>\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                            <div\r\n                                className='tab-pane fade'\r\n                                id='profile'\r\n                                role='tabpanel'\r\n                                aria-labelledby='profile-tab'\r\n                            >\r\n                                <div className='p-4'>\r\n                                    <form onSubmit={handleUpdate}>\r\n                                        <div className='mb-3'>\r\n                                            <input\r\n                                                type='text'\r\n                                                className='form-control'\r\n                                                id='cast'\r\n                                                ref={castInputRef}\r\n                                                placeholder='Favorite Cast'\r\n                                            />\r\n                                        </div>\r\n                                        <div className='mb-3'>\r\n                                            <input\r\n                                                type='text'\r\n                                                className='form-control'\r\n                                                id='lang'\r\n                                                ref={langInputRef}\r\n                                                placeholder='Preferred Language'\r\n                                            />\r\n                                        </div>\r\n                                        <button\r\n                                            type='submit'\r\n                                            className='btn btn-outline-success w-100'\r\n                                        >\r\n                                            Update\r\n                                        </button>\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                            <div\r\n                                className='tab-pane fade'\r\n                                id='contact'\r\n                                role='tabpanel'\r\n                                aria-labelledby='contact-tab'\r\n                            >\r\n                                <div className='p-4'>\r\n                                    <form onSubmit={handleDelete}>\r\n                                        <div className='mb-3'>\r\n                                            <label\r\n                                                htmlFor='password'\r\n                                                className='form-label mb-4 fs-5'\r\n                                            >\r\n                                                Type your password \r\n                                            </label>\r\n                                            <input\r\n                                                type='password'\r\n                                                className='form-control'\r\n                                                id='password'\r\n                                                ref={passwordInputRef}\r\n                                                placeholder='Password'\r\n                                            />\r\n                                        </div>\r\n                                        <button\r\n                                            type='submit'\r\n                                            className='btn btn-outline-danger w-100'\r\n                                        >\r\n                                            <strong>Delete</strong> My Account \r\n                                        </button>\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dashboard\r\n","import React from 'react'\r\n\r\nconst PageNotFound = () => (\r\n    <div className='container mt-5'>\r\n        <p className='h2 fw-normal text-center'>Page Not Found </p>\r\n    </div>\r\n)\r\n\r\nexport default PageNotFound\r\n","import React from 'react'\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport Home from './Home'\r\nimport IndexPage from './IndexPage'\r\nimport Search from './Search'\r\nimport Facet from './Facet'\r\nimport ShowPage from './ShowPage'\r\nimport SignupCard from './SignupCard'\r\nimport LoginCard from './LoginCard'\r\nimport Dashboard from './Dashboard'\r\nimport PageNotFound from './PageNotFound'\r\n\r\nconst Main = () => (\r\n    <main>\r\n        <Switch>\r\n            <Route exact path='/' component={Home} />\r\n            <Route path='/search' component={Search} />\r\n            <Route path='/facet' component={Facet} />\r\n            <Route exact path='/movies' component={IndexPage} />\r\n            <Route path='/movies/:id' component={ShowPage} />\r\n            <Route path='/signup' component={SignupCard} />\r\n            <Route path='/login' component={LoginCard} />\r\n            <Route path='/dashboard' component={Dashboard} />\r\n            <Route component={PageNotFound} />\r\n        </Switch>\r\n    </main>\r\n)\r\n\r\nexport default Main\r\n","import React from 'react'\r\n\r\nconst Footer = () => (\r\n    <footer className='bg-dark p-2 mt-auto'>\r\n        <p className='p-0 m-0 text-muted text-center'>nflix &copy;2021</p>\r\n    </footer>\r\n)\r\n\r\nexport default Footer\r\n","import SEARCH_ACTIONS from '../actions/searchActions'\r\n\r\nconst searchReducer = (search, action) => {\r\n    switch (action.type) {\r\n        case SEARCH_ACTIONS.INPUT:\r\n            return {\r\n                ...search,\r\n                [action.payload.name]: action.payload.value,\r\n            }\r\n        case SEARCH_ACTIONS.FETCH:\r\n            return {\r\n                ...search,\r\n                loading: true,\r\n                error: '',\r\n                page: 1,\r\n            }\r\n        case SEARCH_ACTIONS.PAGINATE:\r\n            return {\r\n                ...search,\r\n                page: action.payload.page,\r\n                loading: true,\r\n                error: '',\r\n            }\r\n        case SEARCH_ACTIONS.SUCCESS:\r\n            return {\r\n                ...search,\r\n                loading: false,\r\n                moviesList: action.payload.moviesList,\r\n                count: action.payload.count,\r\n                error: '',\r\n            }\r\n        case SEARCH_ACTIONS.ERROR:\r\n            return {\r\n                ...search,\r\n                loading: false,\r\n                error: action.payload.error,\r\n                moviesList: [],\r\n                count: 0,\r\n            }\r\n        default:\r\n            return search\r\n    }\r\n}\r\n\r\nexport default searchReducer\r\n","import FACET_ACTIONS from '../actions/facetActions'\r\n\r\nconst facetReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case FACET_ACTIONS.INPUT:\r\n            return {\r\n                ...state,\r\n                [action.payload.name]: action.payload.value,\r\n            }\r\n        case FACET_ACTIONS.FETCH:\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                error: '',\r\n                page: 1,\r\n            }\r\n        case FACET_ACTIONS.PAGINATE:\r\n            return {\r\n                ...state,\r\n                page: action.payload.page,\r\n                loading: true,\r\n                error: '',\r\n            }\r\n        case FACET_ACTIONS.SUCCESS:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: '',\r\n                moviesList: action.payload.moviesList,\r\n                rating: action.payload.rating,\r\n                runtime: action.payload.runtime,\r\n                count: action.payload.count,\r\n            }\r\n        case FACET_ACTIONS.ERROR:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload.error,\r\n                moviesList: [],\r\n                rating: [],\r\n                runtime: [],\r\n                count: 0,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default facetReducer\r\n","import USER_ACTIONS from '../actions/userActions'\r\n\r\nconst userReducer = (user, action) => {\r\n    switch (action.type) {\r\n        case USER_ACTIONS.LOGIN_SUCCESS:\r\n            return {\r\n                auth_token: action.payload.auth_token,\r\n                info: {\r\n                    ...user.info,\r\n                    ...action.payload.info,\r\n                },\r\n                loggedIn: true,\r\n                isAdmin: false,\r\n                error: '',\r\n            }\r\n        case USER_ACTIONS.LOGIN_FAILED:\r\n            return {\r\n                auth_token: '',\r\n                info: {\r\n                    name: '',\r\n                    email: '',\r\n                    preferences: {\r\n                        favorite_cast: '',\r\n                        preferred_language: '',\r\n                    },\r\n                },\r\n                loggedIn: false,\r\n                isAdmin: false,\r\n                error: action.payload.error,\r\n            }\r\n        case USER_ACTIONS.LOGOUT_SUCCESS:\r\n            return {\r\n                auth_token: '',\r\n                info: {\r\n                    name: '',\r\n                    email: '',\r\n                    preferences: {\r\n                        favorite_cast: '',\r\n                        preferred_language: '',\r\n                    },\r\n                },\r\n                loggedIn: false,\r\n                isAdmin: false,\r\n                error: '',\r\n            }\r\n        case USER_ACTIONS.LOGOUT_FAILED:\r\n            return {\r\n                ...user,\r\n                error: action.payload.error,\r\n            }\r\n        case USER_ACTIONS.UPDATE_SUCCESS:\r\n            return {\r\n                ...user,\r\n                ...action.payload,\r\n            }\r\n        case USER_ACTIONS.UPDATE_FAILED:\r\n            return {\r\n                ...user,\r\n                error: action.payload.error,\r\n            }\r\n        case USER_ACTIONS.DELETE_SUCCESS:\r\n            return {\r\n                auth_token: '',\r\n                info: {\r\n                    name: '',\r\n                    email: '',\r\n                    preferences: {\r\n                        favorite_cast: '',\r\n                        preferred_language: '',\r\n                    },\r\n                },\r\n                loggedIn: false,\r\n                isAdmin: false,\r\n                error: '',\r\n            }\r\n        case USER_ACTIONS.DELETE_FAILED:\r\n            return {\r\n                ...user,\r\n                error: action.payload.error,\r\n            }\r\n        default:\r\n            return user\r\n    }\r\n}\r\n\r\nexport default userReducer\r\n","import { useContext } from 'react'\r\nimport NotificationContext from '../../context/NotificationContext'\r\n\r\nconst Notification = () => {\r\n    const { notification, hideNotification } = useContext(NotificationContext)\r\n\r\n    if (!notification) return null\r\n\r\n    return (\r\n        <div className={`position-fixed position-fixed bottom-0 end-0 w-100 px-4 py-3 text-white`}>\r\n            <div\r\n                className={`d-flex justify-content-between align-items-start ${\r\n                    notification.status === 'success' ? 'bg-success' : 'bg-danger'\r\n                } p-3 ps-4 rounded-3`}\r\n            >\r\n                <div className=''>{notification.message}</div>\r\n                <button\r\n                    type='button'\r\n                    className='btn-close btn-close-white ms-5'\r\n                    aria-label='Close'\r\n                    onClick={hideNotification}\r\n                ></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification\r\n","export const loadState = async () => {\r\n    try {\r\n        const user = localStorage.getItem('user')\r\n        if (user === null) return undefined\r\n        const userObj = JSON.parse(user)\r\n        const response = await fetch('/api/v1/users/validate', {\r\n            method: 'POST',\r\n            headers: {\r\n                Authorization: `Bearer ${userObj.auth_token}`,\r\n            },\r\n        })\r\n\r\n        const result = await response.json()\r\n        if (result.error) {\r\n            localStorage.setItem(\r\n                'user',\r\n                JSON.stringify({\r\n                    auth_token: '',\r\n                    info: {\r\n                        name: '',\r\n                        email: '',\r\n                        preferences: {\r\n                            favorite_cast: '',\r\n                            preferred_language: '',\r\n                        },\r\n                    },\r\n                    loggedIn: false,\r\n                    isAdmin: false,\r\n                    error: '',\r\n                })\r\n            )\r\n            return undefined\r\n        } else {\r\n            return result\r\n        }\r\n    } catch (error) {\r\n        return undefined\r\n    }\r\n}\r\n\r\nexport const saveState = user => {\r\n    try {\r\n        const serializedUser = JSON.stringify(user)\r\n        localStorage.setItem('user', serializedUser)\r\n    } catch (error) {\r\n        console.log(error)\r\n    }\r\n}\r\n","import MOVIE_ACTIONS from '../actions/movieActions'\r\n\r\nconst moviesReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case MOVIE_ACTIONS.FETCH:\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                error: '',\r\n            }\r\n        case MOVIE_ACTIONS.PAGINATE:\r\n            return {\r\n                ...state,\r\n                page: state.page + 1,\r\n            }\r\n        case MOVIE_ACTIONS.SUCCESS:\r\n            return {\r\n                ...state,\r\n                moviesList: [...state.moviesList, ...action.payload.moviesList],\r\n                count: action.payload.count,\r\n                loading: false,\r\n                error: '',\r\n            }\r\n        case MOVIE_ACTIONS.ERROR:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload.error,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default moviesReducer\r\n","import React, { useMemo, useReducer, useEffect, useState } from 'react'\nimport Header from './Header'\nimport Main from './Main'\nimport Footer from './Footer'\nimport searchContext from '../context/searchContext'\nimport moviesContext from '../context/moviesContext'\nimport facetContext from '../context/facetContext'\nimport userContext from '../context/userContext'\nimport searchReducer from '../reducers/searchReducer'\nimport facetReducer from '../reducers/facetReducer'\nimport userReducer from '../reducers/userReducer'\nimport { NotificationContextProvider } from '../context/NotificationContext'\nimport Notification from './ui/Notification'\nimport { loadState, saveState } from '../store/localStorage'\n\nimport MOVIE_ACTIONS from '../actions/movieActions'\nimport moviesReducer from '../reducers/moviesReducer'\nimport USER_ACTIONS from '../actions/userActions'\n\nlet initialState = {\n    auth_token: '',\n    info: {\n        name: '',\n        email: '',\n        preferences: {\n            favorite_cast: '',\n            preferred_language: '',\n        },\n    },\n    loggedIn: false,\n    isAdmin: false,\n    error: '',\n}\n\nfunction App() {\n    const [user, userDispatch] = useReducer(userReducer, initialState)\n    const userProviderValue = useMemo(() => ({ user, userDispatch }), [user, userDispatch])\n    useEffect(() => {\n        const loadInitialState = async () => {\n            const localUser = await loadState()\n            if (localUser)\n                userDispatch({\n                    type: USER_ACTIONS.LOGIN_SUCCESS,\n                    payload: {\n                        auth_token: localUser.auth_token,\n                        info: localUser.info,\n                    },\n                })\n        }\n        loadInitialState()\n    }, [])\n    useEffect(() => {\n        saveState(user)\n    }, [user])\n\n    const [search, searchDispatch] = useReducer(searchReducer, {\n        term: '',\n        type: '',\n        moviesList: [],\n        page: 1,\n        count: 0,\n        loading: false,\n        error: '',\n    })\n    const searchProviderValue = useMemo(\n        () => ({\n            search,\n            searchDispatch,\n        }),\n        [search, searchDispatch]\n    )\n\n    const [facet, facetDispatch] = useReducer(facetReducer, {\n        term: '',\n        type: '',\n        page: 1,\n        moviesList: [],\n        rating: [],\n        runtime: [],\n        count: 0,\n        loading: false,\n        error: '',\n    })\n    const facetProviderValue = useMemo(() => ({ facet, facetDispatch }), [facet, facetDispatch])\n\n    const [movies, moviesDispatch] = useReducer(moviesReducer, {\n        moviesList: [],\n        page: 1,\n        count: 0,\n        loading: false,\n        error: '',\n    })\n    const [scroll, setScroll] = useState(0)\n\n    const moviesProviderValue = useMemo(\n        () => ({ movies, moviesDispatch, scroll, setScroll }),\n        [movies, moviesDispatch, scroll, setScroll]\n    )\n\n    useEffect(() => {\n        moviesDispatch({ type: MOVIE_ACTIONS.FETCH })\n        async function fetchData() {\n            try {\n                const response = await fetch(`/api/v1/movies/search?page=${movies.page}`)\n                const data = await response.json()\n                moviesDispatch({\n                    type: MOVIE_ACTIONS.SUCCESS,\n                    payload: { moviesList: data.moviesList, count: data.count },\n                })\n            } catch (e) {\n                moviesDispatch({ type: MOVIE_ACTIONS.ERROR, payload: { error: e.message } })\n            }\n        }\n        fetchData()\n    }, [movies.page])\n\n    return (\n        <div className='d-flex flex-column vh-100'>\n            <NotificationContextProvider>\n                <userContext.Provider value={userProviderValue}>\n                    <moviesContext.Provider value={moviesProviderValue}>\n                        <searchContext.Provider value={searchProviderValue}>\n                            <facetContext.Provider value={facetProviderValue}>\n                                <Header />\n                                <Main />\n                                <Notification />\n                                <Footer />\n                            </facetContext.Provider>\n                        </searchContext.Provider>\n                    </moviesContext.Provider>\n                </userContext.Provider>\n            </NotificationContextProvider>\n        </div>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport './index.css'\nimport App from './components/App'\n\nReactDOM.render(\n    <React.StrictMode>\n        <Router>\n            <App />\n        </Router>\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}