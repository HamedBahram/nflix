(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{66:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(28),s=a.n(n),i=a(6),o=(a(65),a(66),a(11)),l=a.n(o),d=a(18),j=a(13),u=a(4),m={LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",LOGOUT_SUCCESS:"LOGOUT_SUCCESS",LOGOUT_FAILED:"LOGOUT_FAILED"},b=r.a.createContext({user:{auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:""},userDispatch:function(){}}),p=a(1),h=function(){var e=Object(c.useContext)(b),t=e.user,a=e.userDispatch;return Object(p.jsx)("header",{children:Object(p.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark p-3",children:Object(p.jsxs)("div",{className:"container-fluid",children:[Object(p.jsx)(i.b,{className:"navbar-brand",to:"/",children:"nflix"}),Object(p.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(p.jsx)("span",{className:"navbar-toggler-icon"})}),Object(p.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(p.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link active",to:"/","aria-current":"page",children:"Home"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/movies",children:"Movies"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/search",children:"Search"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/facet",children:"Faceted Search"})})]}),t.loggedIn?Object(p.jsx)("ul",{className:"navbar-nav mb-2 mb-lg-0",children:Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/login",onClick:function(){fetch("/api/v1/users/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(t.auth_token)}}).then((function(e){return e.json()})).then((function(e){e.error?a({type:m.LOGOUT_FAILED,payload:{error:e.error}}):a({type:m.LOGOUT_SUCCESS})})).catch((function(e){return a({type:m.LOGOUT_FAILED,payload:{error:e.message}})}))},children:"Logout"})})}):Object(p.jsxs)("ul",{className:"navbar-nav mb-2 mb-lg-0",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/login",children:"Login"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/signup",children:"Singup"})})]})]})]})})})},O=a(9),x=function(){return Object(p.jsx)("div",{className:"container mt-4",children:Object(p.jsx)("p",{className:"lead",children:"Home Page"})})},g={FETCH:"fetch",SUCCESS:"success",ERROR:"error",PAGINATE:"paginate"},v=r.a.createContext({movies:{moviesList:[],page:1,count:0,loading:!1,error:""},moviesDispatch:function(){}}),f=a.p+"static/media/poster.c5d88aa1.jpg",N=a(99),y=a(101),S=a(53),C=a.n(S),L=a(54),E=a.n(L),w=Object(N.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),_={position:"fixed",bottom:"10px",right:"0px"},I=function(){var e=w();return Object(p.jsx)("div",{className:e.root,children:Object(p.jsx)(y.a,{"aria-label":"delete",onClick:function(){window.scrollTo(0,0)},style:_,children:Object(p.jsx)(C.a,{style:{fontSize:30,color:E.a[500]}})})})},k=function(){var e=Object(c.useContext)(v),t=e.movies,a=e.moviesDispatch,r=e.scroll,n=e.setScroll,s=Object(O.g)().pathname,o=Object(c.useRef)(null);Object(c.useEffect)((function(){window.scrollTo(0,r)}),[r,s]);var l=function(e){n(window.scrollY)},d=Object(c.useCallback)((function(e){e&&(t.loading||(o.current&&o.current.disconnect(),o.current=new IntersectionObserver((function(e){e[0].isIntersecting&&a({type:g.PAGINATE})})),o.current.observe(e)))}),[t.loading,a]);return Object(p.jsxs)("div",{className:"container my-3",children:[Object(p.jsxs)("p",{className:"text-muted lead",children:["Total Number of movies:"," ",Object(p.jsx)("span",{className:"badge bg-success rounded-pill fw-normal",children:t.count})]}),Object(p.jsx)("div",{className:"row row-cols-1 row-cols-md-2 row-cols-lg-4 g-2",children:t.moviesList.length&&t.moviesList.map((function(e,a){return a===t.moviesList.length-1?Object(p.jsx)("div",{ref:d,className:"col",children:Object(p.jsx)(i.b,{to:"/movies/".concat(e._id),className:"text-decoration-none text-dark",children:Object(p.jsxs)("div",{className:"card h-100",children:[Object(p.jsx)("img",{className:"card-img-top",src:e.poster?e.poster:f,alt:"",style:{height:200,objectFit:"cover",objectPosition:"top"}}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h6",{className:"card-title",children:e.title}),Object(p.jsxs)("p",{className:"card-text p-0 m-0 small",children:["Rating: ",e.imdb.rating]}),Object(p.jsxs)("p",{className:"card-text p-0 m-0 small",children:["Year: ",e.year]}),Object(p.jsxs)("p",{className:"card-text small",children:["Cast: ",e.cast?e.cast.join(", "):""]})]})]})})},e._id):Object(p.jsx)("div",{className:"col",children:Object(p.jsx)(i.b,{to:"/movies/".concat(e._id),className:"text-decoration-none text-dark",onClick:l,children:Object(p.jsxs)("div",{className:"card h-100",children:[Object(p.jsx)("img",{className:"card-img-top",src:e.poster?e.poster:f,alt:"",style:{height:200,objectFit:"cover",objectPosition:"top"}}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h6",{className:"card-title",children:e.title}),Object(p.jsxs)("p",{className:"card-text p-0 m-0 small",children:["Rating: ",e.imdb.rating]}),Object(p.jsxs)("p",{className:"card-text p-0 m-0 small",children:["Year: ",e.year]}),Object(p.jsxs)("p",{className:"card-text small",children:["Cast: ",e.cast?e.cast.join(", "):""]})]})]})})},e._id)}))}),Object(p.jsx)(I,{})]})},R=function(){return Object(p.jsx)("div",{children:Object(p.jsx)(k,{})})},T=r.a.createContext({search:{term:"",type:"",moviesList:[],page:1,count:0,loading:!1,error:""},searchDispatch:function(){}}),A=function(){var e=Object(d.a)(l.a.mark((function e(t){var a,c,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.loading){e.next=3;break}return e.abrupt("return");case 3:if(""!==t.term){e.next=5;break}return e.abrupt("return",t);case 5:if("text"!==t.type){e.next=14;break}return e.next=8,fetch("/api/v1/movies/search?text=".concat(t.term,"&page=").concat(t.page));case 8:return a=e.sent,e.next=11,a.json();case 11:return e.abrupt("return",e.sent);case 14:return c=t.term.split(","),r=c.map((function(e){return"".concat(t.type,"[]=").concat(e.trim())})),n=r.join("&"),e.next=19,fetch("/api/v1/movies/search?".concat(n,"&page=").concat(t.page));case 19:return s=e.sent,e.next=22,s.json();case 22:return e.abrupt("return",e.sent);case 23:e.next=29;break;case 25:throw e.prev=25,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),U={INPUT:"input",FETCH:"search",SUCCESS:"success",ERROR:"error",PAGINATE:"paginate"},D=a.p+"static/media/text_search_icon.09e93d0b.png",F=a(102),G=function(){var e=Object(c.useContext)(T),t=e.search,a=e.searchDispatch,r=function(e){a({type:U.INPUT,payload:{name:e.target.name,value:e.target.value}})};return Object(p.jsxs)("div",{className:"container my-4",children:[Object(p.jsxs)("div",{className:"row bg-light border border-grey rounded-3 p-5 mb-4 shadow-lg",children:[Object(p.jsx)("div",{className:"col-3",children:Object(p.jsx)("img",{className:"img-fluid",src:D,alt:"text search icon"})}),Object(p.jsxs)("div",{className:"col-9",children:[Object(p.jsx)("h1",{className:"text-center mb-4",children:"Let's Watch a Movie!"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a({type:U.FETCH}),A(t).then((function(e){a({type:U.SUCCESS,payload:{moviesList:e.moviesList,count:e.count}})})).catch((function(e){return a({type:U.ERROR,payload:{error:e.message}})}))},children:[Object(p.jsxs)("div",{className:"row g-0 mb-2 align-items-center border border-grey rounded-pill px-2 py-0 input-container",children:[Object(p.jsx)("div",{className:"col-11",children:Object(p.jsx)("input",{className:"form-control border-0 bg-transparent",id:"search-textbox",type:"text",name:"term",value:t.term,onChange:r,autoComplete:"off",placeholder:"search movies...","aria-label":"search"})}),Object(p.jsx)("div",{className:"col-1 text-end",children:Object(p.jsx)("span",{className:"material-icons fs-2 align-middle text-success",children:"search"})})]}),Object(p.jsxs)("div",{className:"row g-0",children:[Object(p.jsx)("div",{className:"col me-2",children:Object(p.jsxs)("select",{className:"form-select rounded-pill bg-transparent",name:"type",value:t.type,onChange:r,"aria-label":"Default select example",children:[Object(p.jsx)("option",{children:"Search By"}),Object(p.jsx)("option",{value:"cast",children:"Cast"}),Object(p.jsx)("option",{value:"country",children:"Country"}),Object(p.jsx)("option",{value:"genre",children:"Genre"}),Object(p.jsx)("option",{value:"text",children:"Text Search"})]})}),Object(p.jsx)("div",{className:"col",children:Object(p.jsx)("button",{className:"btn btn-outline-success px-4 py-1 rounded-pill w-100",type:"submit",children:t.loading?Object(p.jsx)("div",{className:"spinner-border spinner-border-sm border-2",role:"status"}):"Search"})})]})]})]})]}),Object(p.jsx)("div",{className:"row flex-column p-5",children:t.error?Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:t.error}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"col pb-4",children:Object(p.jsx)(F.a,{page:t.page,count:Math.ceil(t.count/20),onChange:function(e,c){return function(e,c){a({type:U.PAGINATE,payload:{page:c}}),A(Object(u.a)(Object(u.a)({},t),{},{page:c})).then((function(e){a({type:U.SUCCESS,payload:{moviesList:e.moviesList,count:e.count}})})).catch((function(e){return a({type:U.ERROR,payload:{error:e.message}})}))}(0,c)},variant:"outlined",shape:"rounded"})}),Object(p.jsx)("div",{className:"col",children:Object(p.jsx)("ul",{className:"list-group list-group-flush",children:t.moviesList.length?t.moviesList.map((function(e){return Object(p.jsx)(i.b,{to:"/movies/".concat(e._id),className:"list-group-item list-group-item-action",children:e.title},e._id)})):Object(p.jsx)("p",{className:"ps-2 pt-3 text-muted",children:"No results found"})})})]})})]})},P=r.a.createContext({facet:{term:"",type:"",page:1,moviesList:[],rating:[],runtime:[],count:0,loading:!1,error:""},facetDispatch:function(){}}),H=function(){var e=Object(d.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.loading){e.next=3;break}return e.abrupt("return");case 3:if(""!==t.term){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,fetch("/api/v1/movies/facet?".concat(t.type,"=").concat(t.term,"&page=").concat(t.page));case 7:return a=e.sent,e.next=10,a.json();case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(0),console.log(e.t0),new Error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),M={INPUT:"input",FETCH:"fetch",SUCCESS:"success",ERROR:"error",PAGINATE:"paginate",FACET:"facet"},B=a(103),J=a(106),Y=a(107),W=a(104),z=a(105),q=function(){var e=Object(c.useState)("all"),t=Object(j.a)(e,2),a=t[0],r=t[1],n=Object(c.useContext)(P),s=n.facet,o=n.facetDispatch,l=function(e){o({type:M.INPUT,payload:{name:e.target.name,value:e.target.value}})};return Object(p.jsxs)("div",{className:"container my-4",children:[Object(p.jsxs)("div",{className:"row bg-light border border-grey rounded-3 p-5 mb-4 shadow-lg",children:[Object(p.jsx)("div",{className:"col-3",children:Object(p.jsx)("img",{className:"img-fluid",src:D,alt:"text search icon"})}),Object(p.jsxs)("div",{className:"col-9",children:[Object(p.jsx)("h1",{className:"text-center mb-4",children:"Faceted Search"}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o({type:M.FETCH}),H(s).then((function(e){o({type:M.SUCCESS,payload:{moviesList:e.moviesList,rating:e.rating,runtime:e.runtime,count:e.count}})})).catch((function(e){return o({type:M.ERROR,payload:{error:e.message}})}))},children:[Object(p.jsxs)("div",{className:"row g-0 mb-2 align-items-center border border-grey rounded-pill px-2 py-0 input-container",children:[Object(p.jsx)("div",{className:"col-11",children:Object(p.jsx)("input",{className:"form-control border-0 bg-transparent",id:"search-textbox",type:"text",name:"term",value:s.term,onChange:l,autoComplete:"off",placeholder:"search movies...","aria-label":"search"})}),Object(p.jsx)("div",{className:"col-1 text-end",children:Object(p.jsx)("span",{className:"material-icons fs-2 align-middle text-success",children:"search"})})]}),Object(p.jsxs)("div",{className:"row g-0",children:[Object(p.jsx)("div",{className:"col me-2",children:Object(p.jsxs)("select",{className:"form-select rounded-pill bg-transparent",name:"type",value:s.type,onChange:l,"aria-label":"Default select example",children:[Object(p.jsx)("option",{children:"Search By"}),Object(p.jsx)("option",{value:"cast",children:"Cast"}),Object(p.jsx)("option",{value:"country",children:"Country"}),Object(p.jsx)("option",{value:"genre",children:"Genre"})]})}),Object(p.jsx)("div",{className:"col",children:Object(p.jsx)("button",{className:"btn btn-outline-success px-4 py-1 rounded-pill w-100",type:"submit",children:s.loading?Object(p.jsx)("div",{className:"spinner-border spinner-border-sm border-2",role:"status"}):"Search"})})]})]})]})]}),Object(p.jsx)("div",{className:"row flex-column p-5",children:s.error?Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:s.error}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"col d-block d-lg-flex justify-content-between align-items-end pb-4",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:"px-2 text-muted",children:"Pages"}),Object(p.jsx)(F.a,{className:"pb-4 pb-lg-0",page:s.page,count:Math.ceil(s.count/20),onChange:function(e,t){return function(e,t){o({type:M.PAGINATE,payload:{page:t}}),H(Object(u.a)(Object(u.a)({},s),{},{page:t})).then((function(e){o({type:M.SUCCESS,payload:{moviesList:e.moviesList,rating:e.rating,runtime:e.runtime,count:e.count}})})).catch((function(e){return o({type:M.ERROR,payload:{error:e.message}})}))}(0,t)},variant:"outlined",shape:"rounded"})]}),s.rating.length?Object(p.jsxs)(W.a,{className:"ps-1 ps-lg-0",component:"fieldset",children:[Object(p.jsx)(z.a,{className:"ps-1",component:"legend",children:"Rating"}),Object(p.jsxs)(J.a,{"aria-label":"rating",row:!0,name:"rating",value:a,onChange:function(e){var t=e.target.value;switch(t){case"all":r("all");break;case"other":r("other");break;default:r(Number(t))}},children:[s.rating.map((function(e){return Object(p.jsx)(Y.a,{value:e._id,control:Object(p.jsx)(B.a,{}),label:"other"===e._id?"other (".concat(e.count,")"):"".concat(e._id,"-").concat(e._id+20," (").concat(e.count,")")},e._id)})),Object(p.jsx)(Y.a,{value:"all",control:Object(p.jsx)(B.a,{}),label:"All (".concat(s.count<20?s.count:"20",")")})]})]}):null]}),Object(p.jsx)("div",{className:"col",children:Object(p.jsx)("ul",{className:"list-group list-group-flush",children:s.moviesList.length?s.moviesList.map((function(e){return"all"===a?Object(p.jsx)(i.b,{to:"/movies/".concat(e._id),className:"list-group-item list-group-item-action",children:e.title},e._id):"other"!==a||e.metacritic?e.metacritic>=a&&e.metacritic<a+20?Object(p.jsx)(i.b,{to:"/movies/".concat(e._id),className:"list-group-item list-group-item-action",children:e.title},e._id):null:Object(p.jsx)(i.b,{to:"/movies/".concat(e._id),className:"list-group-item list-group-item-action",children:e.title},e._id)})):Object(p.jsx)("p",{className:"ps-2 pt-3 text-muted",children:"No results found"})})})]})})]})},K=function(e){var t=e.match,a=Object(O.f)(),r=t.params.id,n=Object(c.useState)({poster:"",title:"",imdb:{},year:1900,cast:[],fullplot:""}),s=Object(j.a)(n,2),o=s[0],u=s[1];return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/movies/".concat(r));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,u(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),o.error?Object(p.jsx)("div",{className:"container my-3",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col col-xl-6 mx-auto",children:Object(p.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",children:[Object(p.jsx)("strong",{children:"Holy guacamole!"})," ",o.error,Object(p.jsx)("div",{className:"mt-1",children:Object(p.jsx)(i.b,{to:"/movies",className:"link",children:"Back to Movies"})}),Object(p.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]})})})}):Object(p.jsxs)("div",{className:"container my-3",children:[Object(p.jsx)("div",{className:"card",children:Object(p.jsxs)("div",{className:"row g-0",children:[Object(p.jsx)("div",{className:"col-md-4",children:Object(p.jsx)("img",{className:"img-fluid",src:o.poster?o.poster:f,alt:""})}),Object(p.jsx)("div",{className:"col-md-8",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("h5",{className:"card-title mb-3",children:o.title}),Object(p.jsxs)("p",{className:"card-text mb-0",children:["Rating: ",o.metacritic]}),Object(p.jsxs)("p",{className:"card-text mb-0",children:["Year: ",o.year]}),Object(p.jsxs)("p",{className:"card-text",children:["Cast: ",o.cast?o.cast.join(", "):""]}),Object(p.jsx)("p",{className:"card-text",children:o.fullplot}),Object(p.jsx)("p",{className:"card-text",children:Object(p.jsx)("small",{className:"text-muted",children:"Last updated 3 mins ago"})}),Object(p.jsx)("button",{className:"btn btn-outline-secondary px-3 py-1 me-3",onClick:function(){return a.push("/search")},children:"Back to Search"}),Object(p.jsx)(i.b,{to:"/movies",className:"card-link",children:"Back to Movies"}),Object(p.jsx)(i.b,{to:"/",className:"card-link",children:"Home"})]})})]})}),o.comments?o.comments.map((function(e){return Object(p.jsx)("div",{className:"card my-3",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"card-title fw-bold m-0",children:e.name}),Object(p.jsx)("p",{className:"card-subtitle text-muted small mb-1",children:new Date(e.date).toLocaleString()}),Object(p.jsx)("p",{className:"card-text",children:e.text})]})},e._id)})):""]})},Q=function(){var e=Object(c.useContext)(b),t=e.user,a=e.userDispatch,r=Object(c.useState)(""),n=Object(j.a)(r,2),s=n[0],o=n[1],u=Object(c.useState)(""),h=Object(j.a)(u,2),O=h[0],x=h[1],g=Object(c.useState)(""),v=Object(j.a)(g,2),f=v[0],N=v[1],y=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),fetch("/api/v1/users/register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:s,email:O,password:f})}).then((function(e){return e.json()})).then((function(e){e.error?a({type:m.LOGIN_FAILED,payload:{error:e.error}}):a({type:m.LOGIN_SUCCESS,payload:{auth_token:e.auth_token,info:e.info}})})).catch((function(e){console.log({error:e}),a({type:m.LOGIN_FAILED,payload:{error:e.message}})})),o(""),x(""),N("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container my-4",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-6 mx-auto",children:Object(p.jsx)("div",{className:"card border-0 bg-dark py-4 px-3 rounded-3",children:Object(p.jsxs)("div",{className:"card-body",children:[t.error?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h5",{className:"card-title text-light text-center mb-4",children:"Sign Up"}),Object(p.jsx)("div",{className:"alert bg-transparent border border-danger text-danger",role:"alert",children:t.error})]}):"",t.loggedIn?Object(p.jsxs)("div",{className:"text-light",children:["Welcome ",t.info.name,", You are logged in!"]}):Object(p.jsxs)(p.Fragment,{children:[t.error?"":Object(p.jsx)("h5",{className:"card-title text-light text-center mb-4",children:"Sign Up"}),Object(p.jsxs)("form",{onSubmit:y,children:[Object(p.jsx)("input",{type:"text",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingName",placeholder:"name",value:s,onChange:function(e){return o(e.target.value)}}),Object(p.jsx)("input",{type:"email",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingEmail",placeholder:"name@example.com",value:O,onChange:function(e){return x(e.target.value)}}),Object(p.jsx)("input",{type:"password",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingPassword",placeholder:"Password",value:f,onChange:function(e){return N(e.target.value)}}),Object(p.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(p.jsx)(i.b,{to:"/",className:"btn btn-outline-danger rounded rounded-pill flex-grow-1 me-2",children:"Cancel"}),Object(p.jsx)("input",{type:"submit",className:"btn btn-outline-success rounded rounded-pill flex-grow-1",value:"Sign Up"})]})]}),Object(p.jsxs)("div",{className:"d-flex mt-4",children:[Object(p.jsx)("p",{className:"card-text text-muted m-0",children:"Already have an account?"}),Object(p.jsx)(i.b,{to:"/login",className:"m-0 ms-2",children:"Log In"})]})]})]})})})})})},V=function(){var e=Object(c.useContext)(b),t=e.user,a=e.userDispatch,r=Object(c.useState)(""),n=Object(j.a)(r,2),s=n[0],o=n[1],u=Object(c.useState)(""),h=Object(j.a)(u,2),O=h[0],x=h[1],g=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),fetch("/api/v1/users/login",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:s,password:O})}).then((function(e){return e.json()})).then((function(e){e.error?a({type:m.LOGIN_FAILED,payload:{error:e.error}}):a({type:m.LOGIN_SUCCESS,payload:{auth_token:e.auth_token,info:e.info}})})).catch((function(e){console.log({error:e}),a({type:m.LOGIN_FAILED,payload:{error:e.message}})})),o(""),x("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"container my-4",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-md-6 mx-auto",children:Object(p.jsx)("div",{className:"card border-0 bg-dark py-4 px-3 rounded-3",children:Object(p.jsxs)("div",{className:"card-body",children:[t.error?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h5",{className:"card-title text-light text-center mb-4",children:"Log In"}),Object(p.jsx)("div",{className:"alert bg-transparent border border-danger text-danger",role:"alert",children:t.error})]}):"",t.loggedIn?Object(p.jsxs)("div",{className:"text-light",children:["Welcome ",t.info.name,", You are logged in!"]}):Object(p.jsxs)(p.Fragment,{children:[t.error?"":Object(p.jsx)("h5",{className:"card-title text-light text-center mb-4",children:"Log In"}),Object(p.jsxs)("form",{onSubmit:g,children:[Object(p.jsx)("input",{type:"email",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingEmail",placeholder:"name@example.com",value:s,onChange:function(e){return o(e.target.value)}}),Object(p.jsx)("input",{type:"password",className:"form-control rounded rounded-pill mb-3 ps-3",id:"floatingPassword",placeholder:"Password",value:O,onChange:function(e){return x(e.target.value)}}),Object(p.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(p.jsx)(i.b,{to:"/",className:"btn btn-outline-danger rounded rounded-pill flex-grow-1 me-2",children:"Cancel"}),Object(p.jsx)("input",{type:"submit",className:"btn btn-outline-success rounded rounded-pill flex-grow-1",value:"Log In"})]})]}),Object(p.jsxs)("div",{className:"d-flex mt-4",children:[Object(p.jsx)("p",{className:"card-text text-muted m-0",children:"New user?"}),Object(p.jsx)(i.b,{to:"/signup",className:"m-0 ms-2",children:"Sign up here"})]})]})]})})})})})},X=function(){return Object(p.jsx)("div",{className:"container mt-4",children:Object(p.jsx)("p",{className:"lead",children:"Page Not Fount."})})},Z=function(){return Object(p.jsx)("main",{children:Object(p.jsxs)(O.c,{children:[Object(p.jsx)(O.a,{exact:!0,path:"/",component:x}),Object(p.jsx)(O.a,{path:"/search",component:G}),Object(p.jsx)(O.a,{path:"/facet",component:q}),Object(p.jsx)(O.a,{exact:!0,path:"/movies",component:R}),Object(p.jsx)(O.a,{path:"/movies/:id",component:K}),Object(p.jsx)(O.a,{path:"/signup",component:Q}),Object(p.jsx)(O.a,{path:"/login",component:V}),Object(p.jsx)(O.a,{component:X})]})})},$=function(){return Object(p.jsx)("footer",{className:"bg-dark p-2 mt-auto",children:Object(p.jsx)("p",{className:"p-0 m-0 text-muted text-center",children:"nflix \xa92021"})})},ee=a(29),te=function(e,t){switch(t.type){case U.INPUT:return Object(u.a)(Object(u.a)({},e),{},Object(ee.a)({},t.payload.name,t.payload.value));case U.FETCH:return Object(u.a)(Object(u.a)({},e),{},{loading:!0,error:"",page:1});case U.PAGINATE:return Object(u.a)(Object(u.a)({},e),{},{page:t.payload.page,loading:!0,error:""});case U.SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,moviesList:t.payload.moviesList,count:t.payload.count,error:""});case U.ERROR:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload.error,moviesList:[],count:0});default:return e}},ae=function(e,t){switch(t.type){case M.INPUT:return Object(u.a)(Object(u.a)({},e),{},Object(ee.a)({},t.payload.name,t.payload.value));case M.FETCH:return Object(u.a)(Object(u.a)({},e),{},{loading:!0,error:"",page:1});case M.PAGINATE:return Object(u.a)(Object(u.a)({},e),{},{page:t.payload.page,loading:!0,error:""});case M.SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:"",moviesList:t.payload.moviesList,rating:t.payload.rating,runtime:t.payload.runtime,count:t.payload.count});case M.ERROR:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload.error,moviesList:[],rating:[],runtime:[],count:0});default:return e}},ce=function(e,t){switch(t.type){case m.LOGIN_SUCCESS:return{auth_token:t.payload.auth_token,info:Object(u.a)(Object(u.a)({},e.info),t.payload.info),loggedIn:!0,isAdmin:!1,error:""};case m.LOGIN_FAILED:return{auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:t.payload.error};case m.LOGOUT_SUCCESS:return{auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:""};case m.LOGOUT_FAILED:return Object(u.a)(Object(u.a)({},e),{},{error:t.payload.error});default:return e}},re=a(49),ne=function(e,t){switch(t.type){case g.FETCH:return Object(u.a)(Object(u.a)({},e),{},{loading:!0,error:""});case g.PAGINATE:return Object(u.a)(Object(u.a)({},e),{},{page:e.page+1});case g.SUCCESS:return Object(u.a)(Object(u.a)({},e),{},{moviesList:[].concat(Object(re.a)(e.moviesList),Object(re.a)(t.payload.moviesList)),count:t.payload.count,loading:!1,error:""});case g.ERROR:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload.error});default:return e}},se=Object(u.a)({auth_token:"",info:{name:"",email:"",preferences:{favorite_cast:"",preferred_language:""}},loggedIn:!1,isAdmin:!1,error:""},function(){try{var e=localStorage.getItem("user");if(null===e)return;return JSON.parse(e)}catch(t){return}}());var ie=function(){var e=Object(c.useReducer)(ce,se),t=Object(j.a)(e,2),a=t[0],r=t[1],n=Object(c.useMemo)((function(){return{user:a,userDispatch:r}}),[a,r]);Object(c.useEffect)((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("user",t)}catch(a){console.log(a)}}(a)}),[a]);var s=Object(c.useReducer)(te,{term:"",type:"",moviesList:[],page:1,count:0,loading:!1,error:""}),i=Object(j.a)(s,2),o=i[0],u=i[1],m=Object(c.useMemo)((function(){return{search:o,searchDispatch:u}}),[o,u]),O=Object(c.useReducer)(ae,{term:"",type:"",page:1,moviesList:[],rating:[],runtime:[],count:0,loading:!1,error:""}),x=Object(j.a)(O,2),f=x[0],N=x[1],y=Object(c.useMemo)((function(){return{facet:f,facetDispatch:N}}),[f,N]),S=Object(c.useReducer)(ne,{moviesList:[],page:1,count:0,loading:!1,error:""}),C=Object(j.a)(S,2),L=C[0],E=C[1],w=Object(c.useState)(0),_=Object(j.a)(w,2),I=_[0],k=_[1],R=Object(c.useMemo)((function(){return{movies:L,moviesDispatch:E,scroll:I,setScroll:k}}),[L,E,I,k]);return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/v1/movies/search?page=".concat(L.page));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,E({type:g.SUCCESS,payload:{moviesList:a.moviesList,count:a.count}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),E({type:g.ERROR,payload:{error:e.t0.message}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}E({type:g.FETCH}),function(){e.apply(this,arguments)}()}),[L.page]),Object(p.jsx)("div",{className:"d-flex flex-column vh-100",children:Object(p.jsx)(b.Provider,{value:n,children:Object(p.jsx)(v.Provider,{value:R,children:Object(p.jsx)(T.Provider,{value:m,children:Object(p.jsxs)(P.Provider,{value:y,children:[Object(p.jsx)(h,{}),Object(p.jsx)(Z,{}),Object(p.jsx)($,{})]})})})})})};s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(ie,{})})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.6ff7c682.chunk.js.map